<?xml version="1.0" encoding="UTF-8"?>
<selphid-widget-conf version="1.0">

    <DocumentID id="ES" iso="ESP">
        <Version id="All" type="TD1">
            <Front>
                <FACE/>
                <ML cols="6" split_by="elements" separation="0.08" y_separation="0.3" space_separation="0.07">
                    <findLineMatch id="10" dst="docNumber"
                        regex="([0-9] ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?) ?([A-Za-z0-9])"
                        value="($1)([U]$2)"
                    />
                    <replaceIfValid id="18" dst="docNumber" content=" " replace=""/>
                    <!-- We DONT reject at this point -->
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>

                    <findLineMatch id="20" dst="DoB"
                        regex="^([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid id="28" src="DoB"/>
                    <assignField id="29" src="DoB" field="DateOfBirth"/>

                    <findLineMatch id="30" src="doeStr" dst="DoE"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3}|9999)"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid id="38" src="DoE"/>
                    <assignField id="39" src="DoE" field="DateOfExpiry"/>

                    <!-- We test if the cardNumber is in the same line as the date of expiry -->
                    <matchIfValid id="40" src="doeStr" dst="IDCardNumber"
                        regex="^([A-Za-z0-9]{3}) ?([0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA])"
                        value="([U]$1)([N]$2)"
                    />
                    <findLineMatch id="41" dst="IDCardNumber"
                        regex="([A-Za-z0-9]{3}) ?([0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA])"
                        value="([U]$1)([N]$2)"
                        overwrite="false"
                    />
                    <!-- <rejectIfNotValid id="47" src="IDCardNumber"/> -->
                    <replaceIfValid id="48" dst="IDCardNumber" content=" " replace=""/>
                    <assignField id="49" src="IDCardNumber" field="IDCardNumber"/>
                    <assignField id="49_1" src="IDCardNumber" field="NfcKey"/> 

                    <findLineContent id="50" dst="dni" content="DOCUMENTO@NACIONAL@DE@IDENTIDAD" threshold="0.30"/>
                    <findLineContent id="51" dst="nom" content="NOMBRE" threshold="0.30" overwrite="false"/>
                    <findLineContent id="51_1" dst="nom" content="NOMBRE@@@NOM" threshold="0.30" overwrite="false"/>
                    <findLineContent id="51_2" dst="nom" content="NOMBRE@@@IZENA" threshold="0.30" overwrite="false"/>

                    <findLineContent id="60" dst="ape" content="APELLIDOS" threshold="0.30" overwrite="false"/>
                    <findLineContent id="60_1" dst="ape" content="APELLIDOS@@@COGNOMS" threshold="0.30" overwrite="false"/>
                    <findLineContent id="60_2" dst="ape" content="APELLIDOS@@@ABIZENAK" threshold="0.30" overwrite="false"/>
                    <jumpIfNotValid id="61" src="ape" dst="else_apellidos"/>
                        <assignIfValid id="62" dst="ln1" src="ape" offset="+1" overwrite="false"/>
                        <assignIfValid id="63" dst="ln2" src="ape" offset="+2" overwrite="false"/>
                        <assignIfValid id="64" dst="ln1" src="nom" offset="-2" overwrite="false"/>
                        <assignIfValid id="65" dst="ln2" src="nom" offset="-1" overwrite="false"/>
                        <assignResult id="66" src="$_Version2" field="DocumentModel"/>
                        <jump id="69" dst="end_apellidos"/>
                    <label id="70" src="else_apellidos"/>
                        <findLineContent id="71" dst="p_a" content="PRIMER@APELLIDO" threshold="0.30" overwrite="false"/>
                        <findLineContent id="71_1" dst="p_a" content="PRIMER@APELLIDO@@@PRIMER@COGNOM" threshold="0.30" overwrite="false"/>
                        <findLineContent id="71_2" dst="p_a" content="PRIMER@APELLIDO@@@ABIZENAK" threshold="0.30" overwrite="false"/>
                        <findLineContent id="72" dst="s_a" content="SEGUNDO@APELLIDO" threshold="0.30" overwrite="false"/>
                        <findLineContent id="72_1" dst="s_a" content="SEGUNDO@APELLIDO@@@SEGON@COGNOM" threshold="0.30" overwrite="false"/>
                        <findLineContent id="72_2" dst="s_a" content="SEGUNDO@APELLIDO@@@BIGARREN@ABIZENA" threshold="0.30" overwrite="false"/>
                        <assignIfValid id="73" dst="ln1" src="p_a" offset="+1" overwrite="false"/>
                        <assignIfValid id="74" dst="ln1" src="s_a" offset="-1" overwrite="false"/>
                        <assignIfValid id="75" dst="ln2" src="s_a" offset="+1" overwrite="false"/>
                        <assignIfValid id="76" dst="ln2" src="nom" offset="-1" overwrite="false"/>
                        <assignResult id="77" src="$_Version1" field="DocumentModel"/>
                    <label id="79" src="end_apellidos"/>

                    <assignIfValid id="80" dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <modifyIfValid id="81" dst="fn" op="U"/>
                    <modifyIfValid id="82" dst="ln1" op="U"/>
                    <modifyIfValid id="83" dst="ln2" op="U"/>
                    <rejectIfNotValid id="87" src="fn"/>
                    <rejectIfNotValid id="88" src="ln1"/>
                    <rejectIfNotValid id="89" src="ln2"/>

                    <assignIfValid id="90" dst="ln" src="ln1"/>
                    <concatenateIfValid id="91" dst="ln" src="ln2" prefix=" " sufix=""/>

                    <assignField id="100" src="fn" field="FirstName" block="true"/>
                    <assignField id="101" src="ln1" field="LastName1" block="true"/>
                    <assignField id="102" src="ln2" field="LastName2" block="true"/>
                    <assignField id="103" src="ln" field="LastName"/>

                    <findLineMatch id="110" src="sexStr" dst="sex"
                        regex="^(M|F) [A-Z]{3}$"
                        value="($1)"
                    />
                    <findLineMatch id="111" dst="sex"
                        regex="^(M|F)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField id="119" src="sex" field="Gender"/>

                    <matchIfValid id="120" src="sexStr" dst="nat"
                        regex="^(?:M|F) ([A-Z]{3})$"
                        value="($1)"
                    />
                    <assignField id="129" src="nat" field="Nationality"/>

                    <findLineIntersecting id="130" dst="canStr" x="0.7" y="0.8" w="0.3" h="0.2"/>
                    <matchIfValid id="131" src="canStr" dst="canN" overwrite="false"
                        regex="([0-9oOIlBASsG]{6})$"
                        value="([N]$1)"
                    />
                    <assignField id="139" src="canN" field="CANNumber"/>

                    <!-- We try to read a partial document number -->
                    <findLineMatch id="140" dst="partialDocNumber"
                        regex="^([0-9]? ?[0-9]? ?[0-9]? ?[0-9]? ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?) ?([A-Za-z])$"
                        value="($1)([U]$2)"
                    />
                    <!-- We reject if we didn't find neither of those -->
                    <rejectIfNotValid2 id="149" src="docNumber" src2="partialDocNumber"/>

                </ML>
            </Front>
            
            <Back>
                <ML cols="3" split_by="lines" separation="0.08" y_separation="0.3" space_separation="0.07">
                </ML>

                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="IDCardNumber"    line="1" starts="6" count="9" />
                    <field id="DocumentNumber"  line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>
            </Back>

        </Version>
    </DocumentID>
    
    <DocumentID id="PA" iso="PAN">
        <Version id="All" type="TD1">
            <Front>
                <FACE/>
                <ML cols="3" split_by="lines" separation="0.04" y_separation="0.40" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="10" dst="docNumber"
                        regex="^([0-9]+PI|[0-9]+|PE|N|E)-([0-9]+)-([0-9]{2,6})$"
                        value="($1)-($2)-($3)"
                    />
                    <rejectIfNotValid id="11" src="docNumber"/>

                    <assignField id="12" src="docNumber" field="DocumentNumber"/>

                    <findLineContent id="20" dst="err1" content="SERVICIO@NACIONAL@DE@MIGRACIÓN" threshold="0.3"/>
                    <rejectIfValid id="21" src="err1"/>

                    <findLineContent id="30" dst="nu" content="NOMBRE@USUAL" threshold="3"/>
                    <rejectIfNotValid id="30_0" src="nu"/>
                    <findLineContent id="31" dst="rdp" content="REPUBLICA@DE@PANAMA" threshold="4"/>
                    <rejectIfNotValid id="31_0" src="rdp"/>
                    <findLineContent id="32" dst="te" content="TRIBUNAL@ELECTORAL" threshold="0.3"/>
                    <findLineContent id="33" dst="crp" content="CARNE@DE@RESIDENTE@PERMANENTE" threshold="0.3"/>

                    <assignIfValid id="40" dst="fn" src="nu" offset="-2"/>
                    <assignIfValid id="41" dst="ln" src="nu" offset="-1"/>
                    <jumpIfValid2 id="41_0" src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid id="42" dst="fn" src="te" offset="1"/>
                    <assignIfValid id="43" dst="ln" src="te" offset="2"/>
                    <jumpIfValid2 id="43_0" src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid id="44" dst="fn" src="crp" offset="1"/>
                    <assignIfValid id="45" dst="ln" src="crp" offset="2"/>
                    <jumpIfValid2 id="45_0" src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid id="46" dst="fn" src="rdp" offset="2"/>
                    <assignIfValid id="47" dst="ln" src="rdp" offset="3"/>

                    <rejectIfNotValid id="48" src="fn"/>
                    <rejectIfNotValid id="49" src="ln"/>

                    <label id="50_0" src="names_read"/>
                    <modifyIfValid id="50" dst="fn" op="C"/>
                    <modifyIfValid id="51" dst="ln" op="C"/>

                    <!-- Remove doubles -->
                    <matchIfValid id="52_1" dst="fn" regex="(.*A)A$" value="($1)"/>
                    <matchIfValid id="52_2" dst="fn" regex="(.*E)E$" value="($1)"/>
                    <matchIfValid id="52_3" dst="fn" regex="(.*I)I$" value="($1)"/>
                    <matchIfValid id="52_4" dst="fn" regex="(.*O)O$" value="($1)"/>
                    <matchIfValid id="52_5" dst="fn" regex="(.*U)U$" value="($1)"/>
                    <matchIfValid id="53_1" dst="ln" regex="(.*A)A$" value="($1)"/>
                    <matchIfValid id="53_2" dst="ln" regex="(.*E)E$" value="($1)"/>
                    <matchIfValid id="53_3" dst="ln" regex="(.*I)I$" value="($1)"/>
                    <matchIfValid id="53_4" dst="ln" regex="(.*O)O$" value="($1)"/>
                    <matchIfValid id="53_5" dst="ln" regex="(.*U)U$" value="($1)"/>

                    <assignField id="58" src="fn" field="FirstName" block="true"/>
                    <assignField id="59" src="ln" field="LastName" block="true"/>

                    <findLineContent id="60" dst="sexStr" content="SEXO@@@" threshold="2"/>
                    <assignIfContent2 id="61" src="sexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 id="62" src="sexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />

                    <assignIfValid id="70" dst="DoBStr" src="nu" offset="+1" overwrite="false"/>
                    <matchIfValid id="71" src="DoBStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <findLineMatch id="72" src="DoBStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <assignField id="79" src="DoB" field="DateOfBirth" block="true"/>

                    <findLineMatch2 id="90" dst="DoI" dst2="DoE"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <findLineMatch id="91" dst="DoE"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <assignField id="98" src="DoI" field="DateOfIssue"/>
                    <assignField id="99" src="DoE" field="DateOfExpiry"/>

                    <rejectIfNotValid id="100" src="DoB"/>
                    <rejectIfNotValid id="101" src="DoI"/>
                    <rejectIfNotValid id="102" src="DoE"/>

                    <findLineContent id="110" dst="btStr" content="TIPO@DE@SANGRE@" threshold="0.4"/>
                    <matchIfValid id="111" dst="BT" src="btStr"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                    />

                    <findLineContent id="120" dst="nat" content="NACIONALIDAD:#" threshold="0.3"/>
                    <jumpIfNotValid id="121" src="nat" dst="noNationality"/>
                    <replaceIfValid id="122" dst="nat" content="NACIONALIDAD" replace="" threshold="0.2"/>
                    <replaceIfValid id="123" dst="nat" content=":" replace=""/>
                    <replaceIfValid id="124" dst="nat" content="." replace=""/>
                    <assignField id="129" src="nat" field="Nationality"/>
                    <label id="129_0" src="noNationality"/>

                    <findLineContent id="130" dst="PoB" content="LUGAR@DE@NACIMIENTO#" threshold="0.3"/>
                    <jumpIfNotValid id="131" src="PoB" dst="noPlaceOfBirth"/>
                    <replaceIfValid id="132" dst="PoB" content="LUGAR" replace="" threshold="0.2"/>
                    <replaceIfValid id="133" dst="PoB" content="NACIMIENTO" replace="" threshold="0.2"/>
                    <replaceIfValid id="134" dst="PoB" content="DE" replace="" threshold="0.2"/>
                    <replaceIfValid id="135" dst="PoB" content=":" replace=""/>
                    <replaceIfValid id="136" dst="PoB" content="." replace=""/>
                    <assignField id="139" src="PoB" field="PlaceOfBirth"/>
                    <label id="139_0" src="noPlaceOfBirth"/>
                    
                    <findLineContent id="140" dst="bdStr" content="DONANTE" threshold="2"/>
                    <assignIfContent id="141" src="bdStr" dst="BD" value="YES"
                        op="exists"
                        overwrite="false"
                    />

                    <!-- We test again for sex and blood donor if it's all in one line -->
                    <findLineContent id="150" dst="g_bd" content="SEXO@@@@DONANTE" threshold="0.3"/>
                    <assignIfContent id="151" src="g_bd" dst="BD" value="YES"
                        op="exists"
                        overwrite="false"
                    />
                    <replaceIfValid id="160" dst="maybeSexStr" src="g_bd_bt" content="DONANTE" replace="" threshold="0.2"/>
                    <assignIfContent2 id="162" src="maybeSexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 id="164" src="maybeSexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />

                    <!-- We test again for sex, blood donor and blood type if it's all in one line -->
                    <findLineContent id="250" dst="g_bd_bt" content="SEXO@@@@DONANTE@TIPO@DE@SANGRE@" threshold="0.4"/>
                    <assignIfContent id="251" src="g_bd_bt" dst="BD" value="YES"
                        op="exists"
                        overwrite="false"
                    />

                    <matchIfValid id="252" src="g_bd_bt" dst="BT"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                        overwrite="false"
                    />

                    <replaceIfValid id="260" dst="maybeSexStr" src="g_bd_bt" content="DONANTE" replace="" threshold="0.2"/>
                    <replaceIfValid id="261" dst="maybeSexStr" content="TIPO DE SANGRE" replace="" threshold="0.2"/>
                    <assignIfContent2 id="262" src="maybeSexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 id="264" src="maybeSexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    
                    <assignIfContent id="270" dst="BD" value="NO"
                        op="not_exists"
                        overwrite="false"
                    />

                    <assignIfContent id="280" dst="BT" value=""
                        op="not_exists"
                        overwrite="false"
                    />

                    <assignField id="290" src="BD" field="BloodDonor"/>
                    <assignField id="291" src="BT" field="BloodType"/>
                    <assignField id="292" src="sex" field="Gender"/>

                </ML>
            </Front>
            
            
        </Version>
    </DocumentID>
    
    <DocumentID id="PE" iso="PER">
        <Version id="2005" type="TD1">
            <Front>
                <FACE/>

                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch id="0" dst="docNumber"
                        regex="([0-9oOl]{8})(?: *)-(?: *)([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                        overwrite="false"
                    />
                    <!-- We read MRZ via ML -->
                    <findLineMatch id="1" src="dataMRZ1" dst="docNumber"
                        regex="(?:[A-Z]{3}) ?([0-9oOl]{8})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="8" src="docNumber"/>
                    <assignField id="9_1" src="docNumber" field="CUI"/>
                    <assignField id="9_2" src="docNumber" field="DocumentNumber"/>


                    <findLineMatch id="20" src="dataMRZ2" dst="gender"
                        regex="^(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))([M|F|X]) ?(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))(?:(?:[A-Z][\s\.]*){3})"
                        value="([U]$1)"
                    />
                    <rejectIfNotValid id="20_1_8" src="dataMRZ2"/>
                    <assignField id="20_1_9" src="gender" field="Gender"/>

                    <matchIfValid id="20_2_1" src="dataMRZ2" dst="dob"
                        regex="^((?:[0-9oOl][\s\.]*){2})((?:[0-9oOl][\s\.]*){2})((?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))(?:[M|F|X]) ?(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))(?:(?:[A-Z][\s\.]*){3})"
                        value="([N]$3)/([N]$2)/([YP]$1)"
                    />
                    <replaceIfValid id="20_2_2" dst="dob" content=" " replace=""/>
                    <assignField id="20_2_9" src="dob" field="DateOfBirth"/>

                    <matchIfValid id="20_3_1" src="dataMRZ2" dst="doe"
                        regex="^(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))(?:[M|F|X]) ?((?:[0-9oOl][\s\.]*){2})((?:[0-9oOl][\s\.]*){2})((?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))(?:(?:[A-Z][\s\.]*){3})"
                        value="([N]$3)/([N]$2)/([YF]$1)"
                    />
                    <replaceIfValid id="20_3_2" dst="doe" content=" " replace=""/>
                    <assignField id="20_3_9" src="doe" field="DateOfExpiry"/>

                    <matchIfValid id="20_4_1" src="dataMRZ2" dst="nationality"
                        regex="^(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))(?:[M|F|X]) ?(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))((?:[A-Z][\s\.]*){3})"
                        value="([U]$1)"
                    />
                    <assignField id="20_4_9" src="nationality" field="Nationality"/>


                    <findLineContent id="30_0" dst="dataFirstSurname" content="Primer@Apellido@First@Surname" threshold="0.2" overwrite="false"/>
                    <findLineContent id="30_1" dst="dataFirstSurname" content="Primer@Apellido" threshold="0.2" overwrite="false"/>
                    <findLineContent id="31_0" dst="dataSecondSurname" content="Segundo@Apellido@Second@Surname" threshold="0.2" overwrite="false"/>
                    <findLineContent id="31_1" dst="dataSecondSurname" content="Segundo@Apellido" threshold="0.2" overwrite="false"/>
                    <findLineContent id="32_0" dst="dataFirstName" content="Pre@Nombres@Given@Names" threshold="0.2" overwrite="false"/>
                    <findLineContent id="32_1" dst="dataFirstName" content="Pre@Nombre" threshold="0.2" overwrite="false"/>
                    <findLineContent id="33_0" dst="dataDateOfInscription" content="Inscription@Date" threshold="0.3" overwrite="false"/>
                    <findLineContent id="33_1" dst="dataDateOfInscription" content="Fecha@inscripción" threshold="0.3" overwrite="false"/>
                    <findLineContent id="34_0" dst="dataDateOfIssue" content="Issue@Date" threshold="0.2" overwrite="false"/>
                    <findLineContent id="34_1" dst="dataDateOfIssue" content="Fecha@Emisión" threshold="0.2" overwrite="false"/>
                    <findLineContent id="35_0" dst="dataDateOfExpiry" content="Expiration@Date" threshold="0.2" overwrite="false"/>
                    <findLineContent id="35_1" dst="dataDateOfExpiry" content="Fecha@Caducidad" threshold="0.2" overwrite="false"/>

                    <assignIfValid id="40_1" dst="ln" src="dataFirstSurname" offset="1" overwrite="false"/>
                    <assignIfValid id="40_2" dst="ln" src="dataSecondSurname" offset="-1" overwrite="false"/>
                    <assignIfValid id="40_3" dst="ln" src="dataFirstName" offset="-3" overwrite="false"/>
                    <assignIfValid id="41_1" dst="ln2" src="dataSecondSurname" offset="1" overwrite="false"/>
                    <assignIfValid id="41_2" dst="ln2" src="dataFirstName" offset="-1" overwrite="false"/>
                    <assignIfValid id="41_3" dst="ln2" src="dataFirstSurname" offset="3" overwrite="false"/>
                    <assignIfValid id="42_1" dst="fn" src="dataFirstName" offset="1" overwrite="false"/>
                    <assignIfValid id="42_2" dst="fn" src="dataSecondSurname" offset="3" overwrite="false"/>
                    <assignIfValid id="42_3" dst="fn" src="dataFirstSurname" offset="5" overwrite="false"/>
                    <concatenateIfValid id="46" dst="ln" src="ln2" prefix=" " sufix=""/>
                    <rejectIfNotValid id="47_1" src="ln"/>
                    <modifyIfValid id="48_1" dst="ln" op="U"/>
                    <assignField id="49_1" src="ln" field="LastName"/>

                    <rejectIfNotValid id="47_2" src="fn"/>
                    <modifyIfValid id="48_2" dst="fn" op="U"/>
                    <assignField id="49_2" src="fn" field="FirstName"/>

                    <assignIfValid id="50" dst="doins2" src="dataDateOfInscription" offset="1" overwrite="false"/>
                    <matchIfValid id="51" src="doins2" dst="doins"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField id="59" src="doins" field="DateOfInscription"/>

                    <assignIfValid id="60" dst="doi2" src="dataDateOfIssue" offset="1" overwrite="false"/>
                    <matchIfValid id="61" src="doi2" dst="doi"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField id="69" src="doi" field="DateOfIssue"/>
                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
<!--
                <PDF417 decode="substring" charset="ISO-8859-1" optional="yes">
                    <field id="Data0"               starts="1" ends="3" />
                    <field id="DocumentNumber"      starts="3" ends="11" />
                    <field id="LastName1"           starts="11" ends="51" />
                    <field id="LastName2"           starts="51" ends="91" />
                    <field id="FirstName"           starts="91" ends="126" />
                    <field id="Data5"               starts="126" ends="504" />
                    <field id="DateOfExpiry"        starts="504" ends="512" />
                    <field id="Data7"               starts="512" ends="520" />
                    <field id="Data8"               starts="520" ends="528" />
                </PDF417>
-->
                <BARCODE types="CODE39" decode="splitBy: " charset="UTF-8" optional="no">
                    <field id="DocumentNumber"       data="0"/>
                </BARCODE>

                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <!-- Check if we are scaning the front of version 2013 -->
                    <findLineMatch id="0" dst="docNumber"
                        regex="([0-9oOl]{8})(?: *)-(?: *)([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                    />
                    <rejectIfValid id="8" src="docNumber"/>
                    <!-- Reject if we find the doc number -->


                    <findLineContent id="10" dst="dataDepartment" content="Departamento" threshold="0.3" overwrite="false"/>
                    <findLineContent id="11" dst="dataState" content="Provincia" threshold="0.3" overwrite="false"/>
                    <findLineContent id="12" dst="dataDistrict" content="Distrito" threshold="0.3" overwrite="false"/>
                    <findLineContent id="13_0" dst="dataAddress" content="Dirección@Home@Address" threshold="0.3" overwrite="false"/>
                    <findLineContent id="13_1" dst="dataAddress" content="Dirección" threshold="0.3" overwrite="false"/>
                    <findLineContent id="14_0" dst="dataVoteGroup" content="Grup@@Vot@@Voting@Group#" threshold="0.3" overwrite="false"/>
                    <findLineContent id="14_1" dst="dataVoteGroup" content="Grupo@de@votación#" threshold="0.3" overwrite="false"/>
                    <findLineContent id="15_0" dst="dataObservations" content="Obs@Comments" threshold="0.3" overwrite="false"/>
                    <findLineContent id="15_1" dst="dataObservations" content="Observaciones" threshold="0.3" overwrite="false"/>
                    <findLineContent id="16" dst="dataCountry" content="País@Country" threshold="0.3" overwrite="false"/>
                    <findLineContent id="17" dst="dataCity" content="Ciudad@City" threshold="0.3" overwrite="false"/>

                    <rejectIfNotValid4 id="19_1" src="dataDepartment" src2="dataAddress" src3="dataObservations" src4="dataCountry"/>
                    <rejectIfNotValid2 id="19_2" src="dataDistrict" src2="dataVoteGroup"/>

                    <assignIfValid id="20_0" dst="addressDepartment" src="dataDepartment" offset="1" overwrite="false"/>
                    <assignIfValid id="20_1" dst="addressState" src="dataState" offset="1" overwrite="false"/>
                    <assignIfValid id="20_2" dst="addressDistrict" src="dataDistrict" offset="1" overwrite="false"/>
                    <assignIfValid id="20_3" dst="address" src="dataAddress" offset="1" overwrite="false"/>
                    <assignIfValid id="20_4" dst="addressCountry" src="dataCountry" offset="1" overwrite="false"/>
                    <assignIfValid id="20_5" dst="addressCity" src="dataCity" offset="1" overwrite="false"/>
                    
                    <modifyIfValid id="28_0" dst="addressDepartment" op="U"/>
                    <modifyIfValid id="28_1" dst="addressState" op="U"/>
                    <modifyIfValid id="28_2" dst="addressDistrict" op="U"/>
                    
                    <matchIfValid id="28_3" dst="voteGroup" src="dataVoteGroup"
                        regex="([0-9oOl]{6})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignIfValid id="28_4" dst="voteGroup" src="dataVoteGroup" offset="1" overwrite="false"/>
                    <matchIfValid id="28_5" dst="voteGroup"
                        regex="([0-9oOl]{6})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField id="29_0" src="addressDepartment" field="AddressDepartment"/>
                    <assignField id="29_1" src="addressState" field="AddressState"/>
                    <assignField id="29_2" src="addressDistrict" field="AddressDistrict"/>
                    <assignField id="29_3" src="address" field="Address"/>
                    <assignField id="29_4" src="voteGroup" field="VoteGroup"/>
                    <assignField id="29_5" src="addressCountry" field="AddressCountry"/>
                    <assignField id="29_6" src="addressCity" field="AddressCity"/>

                    <jumpIfValid id="30_0" src="addressDepartment" dst="jumpDocumentFinish" />
                    <jumpIfValid id="30_1" src="addressState" dst="jumpDocumentFinish" />
                    <jumpIfValid id="30_2" src="addressDistrict" dst="jumpDocumentFinish" />
                    <jumpIfValid id="30_4" src="voteGroup" dst="jumpDocumentFinish" />
                    
                    <rejectIfNotValid id="39" src="dummy"/>

                    <label id="35" src="jumpDocumentFinish" />
                </ML>
            </Back>

        </Version>
        <Version id="2013" type="TD1">
            <Front>
                <FACE/>
                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="10" dst="docNumber"
                        regex="([0-9oOl]{8})(?: *)-(?: *)([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                    />
                    <rejectIfNotValid id="18" src="docNumber"/>
                    <assignField id="19_1" src="docNumber" field="CUI"/>
                    <assignField id="19_2" src="docNumber" field="DocumentNumber"/>

                    <findLineContent id="20_1" dst="dataFirstSurname" content="Primer@Apellido" threshold="0.3"/>
                    <findLineContent id="20_2" dst="dataSecondSurname" content="Segundo@Apellido" threshold="0.3"/>
                    <findLineContent id="20_3" dst="dataFirstName" content="Prenombres" threshold="0.3"/>
                    <findLineContent id="20_4" dst="dataGender" content="Sexo" threshold="0.3"/>
                    <findLineContent id="20_5" dst="dataDateOfBirth" content="Fecha@de@Nacimiento" threshold="0.2"/>
                    <findLineContent id="20_6" dst="dataDateOfIssue" content="Fecha@de@Emisión" threshold="0.2"/>
                    <findLineContent id="20_7" dst="dataVoteGroup" content="Grupo@de@Votación" threshold="0.2"/>

                    <findLineContent id="21_1" dst="dataCivilState" content="Estado@Civil" threshold="0.2"/>
                    <findLineContent id="21_2" dst="dataUbigeoOfBirth" content="Ubigeo@de@Nacimiento" threshold="0.2"/>
                    <findLineContent id="21_3" dst="dataDateOfExpiry" content="Fecha@de@Caducidad" threshold="0.2"/>
                    <findLineContent id="21_4" dst="dataOrganDonor" content="Donación@de@Órganos" threshold="0.2"/>

                    <assignIfValid id="30_1" dst="ln" src="dataFirstSurname" offset="1" overwrite="false"/>
                    <assignIfValid id="30_2" dst="ln" src="dataSecondSurname" offset="-1" overwrite="false"/>
                    <assignIfValid id="30_3" dst="ln" src="dataFirstName" offset="-3" overwrite="false"/>
                    <assignIfValid id="31_1" dst="ln2" src="dataSecondSurname" offset="1" overwrite="false"/>
                    <assignIfValid id="31_2" dst="ln2" src="dataFirstName" offset="-1" overwrite="false"/>
                    <assignIfValid id="31_3" dst="ln2" src="dataFirstSurname" offset="3" overwrite="false"/>
                    <assignIfValid id="32_1" dst="fn" src="dataFirstName" offset="1" overwrite="false"/>
                    <assignIfValid id="32_2" dst="fn" src="dataGender" offset="-1" overwrite="false"/>
                    <assignIfValid id="32_3" dst="fn" src="dataSecondSurname" offset="3" overwrite="false"/>
                    <concatenateIfValid id="36" dst="ln" src="ln2" prefix=" " sufix=""/>
                    <rejectIfNotValid id="37_1" src="ln"/>
                    <modifyIfValid id="38_1" dst="ln" op="U"/>
                    <assignField id="39_1" src="ln" field="LastName"/>

                    <rejectIfNotValid id="47_2" src="fn"/>
                    <modifyIfValid id="48_2" dst="fn" op="U"/>
                    <assignField id="49_2" src="fn" field="FirstName"/>

                    <assignIfValid id="50_1" dst="genderStr" src="dataGender" offset="1" overwrite="false"/>
                    <assignIfValid id="50_2" dst="genderStr" src="dataDateOfBirth" offset="-1" overwrite="false"/>
                    <findLineContent id="51_1" dst="genderStr" content="MASCULINO" threshold="0.3" overwrite="false"/>
                    <findLineContent id="51_2" dst="genderStr" content="FEMENINO" threshold="0.3" overwrite="false"/>
                    <assignIfContent id="51_3" src="genderStr" dst="gender" value="M"
                        op="distance" param="MASCULINO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent id="51_4" src="genderStr" dst="gender" value="F"
                        op="distance" param="FEMENINO" param_2="0.3"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="58" src="gender"/>
                    <assignField id="59" src="gender" field="Gender"/>

                    <assignIfValid id="60_1" dst="dob2" src="dataDateOfBirth" offset="1" overwrite="false"/>
                    <assignIfValid id="60_2" dst="dob2" src="dataDateOfIssue" offset="-1" overwrite="false"/>
                    <findLineMatch id="60_3" dst="dob"
                        regex="^(?:[0-9oOl]{10})(?:\s)*([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})$"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <matchIfValid id="61" src="dob2" dst="dob"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="68" src="dob"/>
                    <assignField id="69" src="dob" field="DateOfBirth"/>

                    <assignIfValid id="70_1" dst="doi2" src="dataDateOfIssue" offset="1" overwrite="false"/>
                    <assignIfValid id="70_2" dst="doi2" src="dataVoteGroup" offset="-1" overwrite="false"/>
                    <matchIfValid id="71" src="doi2" dst="doi"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="78" src="doi"/>
                    <assignField id="79" src="doi" field="DateOfIssue"/>

                    <assignIfValid id="80" dst="voteGroup2" src="dataVoteGroup" offset="1" overwrite="false"/>
                    <matchIfValid id="81" src="voteGroup2" dst="voteGroup"
                        regex="([0-9oOl]{6})"
                        value="([N]$1)"
                    />
                    <assignField id="89" src="voteGroup" field="VoteGroup"/>

                    <findLineContent id="90_1" dst="civilState2" content="SOLTERO" threshold="0.3"/>
                    <findLineContent id="90_2" dst="civilState2" content="CASADO" threshold="0.3"/>
                    <findLineContent id="90_3" dst="civilState2" content="DIVORCIADO" threshold="0.3"/>
                    <findLineContent id="90_4" dst="civilState2" content="VIUDO" threshold="0.3"/>
                    <assignIfValid id="90_5" dst="civilState2" src="dataCivilState" offset="1" overwrite="false"/>
                    <assignIfValid id="90_6" dst="civilState2" src="dataUbigeoOfBirth" offset="-1" overwrite="false"/>
                    <assignIfContent id="91_1" src="civilState2" dst="civilState" value="SOLTERO(A)"
                        op="distance" param="SOLTERO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent id="91_2" src="civilState2" dst="civilState" value="CASADO(A)"
                        op="distance" param="CASADO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent id="91_3" src="civilState2" dst="civilState" value="DIVORCIADO(A)"
                        op="distance" param="DIVORCIADO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent id="91_4" src="civilState2" dst="civilState" value="VIUDO(A)"
                        op="distance" param="VIUDO" param_2="0.3"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="98" src="civilState"/>
                    <assignField id="99" src="civilState" field="CivilStatus"/>

                    <assignIfValid id="100_1" dst="ubigeoOfBirth2" src="dataUbigeoOfBirth" offset="1" overwrite="false"/>
                    <assignIfValid id="100_1" dst="ubigeoOfBirth2" src="dataDateOfExpiry" offset="-1" overwrite="false"/>
                    <matchIfValid id="101" src="ubigeoOfBirth2" dst="ubigeoOfBirth"
                        regex="([0-9oOl]{6})"
                        value="([N]$1)"
                    />
                    <assignField id="109" src="ubigeoOfBirth" field="UbigeoOfBirth"/>

                    <assignIfValid id="110_1" dst="doe2" src="dataDateOfExpiry" offset="1" overwrite="false"/>
                    <assignIfValid id="110_2" dst="doe2" src="dataVoteGroup" offset="-1" overwrite="false"/>
                    <matchIfValid id="111" src="doe2" dst="doe"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="118" src="doe"/>
                    <assignField id="119" src="doe" field="DateOfExpiry"/>

                    <assignIfValid id="120" dst="organDonor2" src="dataOrganDonor" offset="1" overwrite="false"/>
                    <assignIfContent id="121_1" src="organDonor2" dst="organDonor" value="YES"
                        op="distance" param="SÍ" param_2="0.5"
                        overwrite="false"
                    />
                    <assignIfContent id="121_2" src="organDonor2" dst="organDonor" value="NO"
                        op="distance" param="NO" param_2="0.5"
                        overwrite="false"
                    />
                    <assignField id="129" src="organDonor" field="OrganDonor"/>
                </ML>
            </Front>
            
            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocumentNumber"  line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>
                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">
                    <findLineContent id="10_1" dst="dataAddressComplete" content="Departamento@Provincia@Distrito" threshold="0.2"/>
                    <findLineContent id="10_2" dst="dataAddress" content="Dirección" threshold="0.3"/>
                    <findLineContent id="10_3" dst="dataFingerprint" content="Índice@Derecho" threshold="0.3"/>
                    <assignIfValid id="20_1" dst="addressComplete2" src="dataAddressComplete" offset="1" overwrite="false"/>
                    <assignIfValid id="20_2" dst="addressComplete2" src="dataAddress" offset="-1" overwrite="false"/>
                    <rejectIfNotValid id="21" src="addressComplete2"/>
                    <matchIfValid id="22" src="addressComplete2" dst="addressComplete"
                        regex="^([\w\s]+)\/([\w\s]+)\/([\w\s]+)$"
                        value="([U]$1)/([U]$2)/([U]$3)"
                    />

                    <splitIfValid3 id="27" src="addressComplete" by="/"
                        dst1="addressDepartment"
                        dst2="addressState"
                        dst3="addressDisctict"
                        overwrite="false"
                    />
                    <assignField id="29_1" src="addressComplete" field="AddressComplete"/>
                    <assignField id="29_2" src="addressDepartment" field="addressDepartment"/>
                    <assignField id="29_3" src="addressState" field="AddressState"/>
                    <assignField id="29_4" src="addressDisctict" field="AddressDisctict"/>

                    <assignIfValid id="30_1" dst="address" src="dataAddress" offset="1" overwrite="false"/>
                    <assignIfValid id="30_2" dst="address" src="dataFingerprint" offset="-1" overwrite="false"/>
                    <rejectIfNotValid id="37" src="address"/>
                    <assignField id="39" src="address" field="Address"/>
                </ML>
            </Back>
        </Version>

        <Version id="2020" type="TD1">
            <Front>
                <FACE/>
                <ML cols="4" split_by="elements" separation="0.04" space_separation="0.04">
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="1_1" dst="res1" content="REPÚBLICA@DEL@PERÚ" threshold="0.2"/>
                    <findLineContent id="1_2" dst="res2" content="DOCUMENTO@NACIONAL@DE@IDENTIDAD" threshold="0.2"/>
                    <rejectIfNotValid2 id="1_3" src="res1" src2="res2"/>

                    <findLineMatch id="2" dst="cuiNumber"
                        regex="([0-9oOl]{8})(?: *)-(?: *)([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="2_1" src="cuiNumber"/>

                    <findLineContent id="3_1" dst="ln11" content="Primer@Apellido" threshold="0.2"/>
                    <assignIfValid id="3_2" dst="ln1" src="ln11" offset="+1" overwrite="false"/>
                    <findLineContent id="4_1" dst="ln22" content="Segundo@Apellido" threshold="0.2"/>
                    <assignIfValid id="4_2" dst="ln2" src="ln22" offset="+1" overwrite="false"/>
                    <assignIfValid id="4_3" dst="ln" src="ln1"/>
                    <concatenateIfValid id="4_4" dst="ln" src="ln2" prefix=" " sufix=""/>
                    <findLineContent id="5_1" dst="fn1" content="Prenombres" threshold="0.2"/>
                    <assignIfValid id="5_2" dst="fn" src="fn1" offset="+1" overwrite="false"/>
                    <findLineMatch id="6_1" dst="gen"
                        regex="^(M|F)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch id="6_2" src="genStr" dst="gen"
                        regex="(M|F) [A-Za-z]{3}$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch id="6_2" src="genStr" dst="gen"
                        regex="[0-9]{6} (M|F)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch id="7_1" dst="nat"
                        regex="^([A-Za-z]{3})$"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="7_2" src="genStr" dst="nat"
                        regex="([A-Za-z]{3})"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="8_1" dst="ecc" content="Estado@Civil" threshold="0.2"/>
                    <assignIfValid id="8_2" dst="ec" src="ecc" offset="+1" overwrite="false"/>
                    <findLineContent id="9_1" dst="cardStr" content="N@@de@Tarjeta" threshold="0.3"/>
                    <findLineMatch id="9_2" dst="cardNum"
                        regex="^([0-9]{9,})$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid id="9_6" dst="cardNum" src="card" offset="+1" overwrite="false"/>

                    <findLineMatch id="10" dst="dob" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch id="11" dst="doi" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch id="12" dst="doe" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />

                    <assignField id="13" src="cuiNumber" field="CUI"/>
                    <assignField id="14" src="cuiNumber" field="DocumentNumber"/>
                    <assignField id="15" src="ln1" field="LastName1"/>
                    <assignField id="16" src="ln2" field="LastName2"/>
                    <assignField id="17" src="ln" field="LastName"/>
                    <assignField id="18" src="fn" field="FirstName"/>
                    <assignField id="19" src="gen" field="Gender"/>
                    <assignField id="20" src="nat" field="Nationality"/>
                    <assignField id="21" src="dob" field="DateOfBirth"/>
                    <assignField id="22" src="ec" field="CivilStatus"/>
                    <assignField id="23" src="cardNum" field="IDCardNumber"/>
                    <assignField id="24" src="doe" field="DateOfExpiry"/>
                    <assignField id="25" src="doi" field="DateOfIssue"/>
                </ML>
            </Front>

            <Back>
                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.001">
                    <findLineContent id="1_1" dst="dataVoteGroup" content="Grupo@de@Votación" threshold="0.2"/>
                    <assignIfValid id="1_2" dst="voteGroup" src="dataVoteGroup" offset="+1" overwrite="false"/>
                    <findLineMatch id="2_1" dst="ubigeoOfBirth"
                        regex="([0-9]{6})"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineContent id="3_1" dst="dataOrganDonor" content="Donación@de@Órganos@@@" threshold="0.2"/>
                    <matchIfValid id="3_2" src="dataOrganDonor" dst="organDonor"
                        regex="(SÍ|NO)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineContent id="4_1" dst="dataAddressComplete" content="Departamento@Provincia@Distrito" threshold="0.2"/>
                    <assignIfValid id="4_2" dst="addressCompletee" src="dataAddressComplete" offset="+1" overwrite="false"/>
                    <rejectIfNotValid id="4_3" src="addressCompletee"/>
                    <matchIfValid id="4_4" src="addressCompletee" dst="addressComplete"
                        regex="^([\w\s]+)\/([\w\s]+)\/([\w\s]+)$"
                        value="([U]$1)/([U]$2)/([U]$3)"
                    />
                    <splitIfValid3 id="4_5" src="addressComplete" by="/"
                        dst1="addressDepartment"
                        dst2="addressState"
                        dst3="addressDisctict"
                        overwrite="false"
                    />
                    <findLineFrom id="5_0" dst="addres1" src="dataOrganDonor" direction="RIGHT" overwrite="false"/>
                    <findLineFrom id="5_1" dst="addres2" src="addres1" direction="BOTTOM" overwrite="false"/>
                    <assignIfValid id="5_2" dst="address" src="addres1"/>
                    <concatenateIfValid id="5_3" dst="address" src="addres2" prefix=" " sufix=""/>

                    <assignField id="6" src="voteGroup" field="VoteGroup"/>
                    <assignField id="7" src="ubigeoOfBirth" field="UbigeoOfBirth"/>
                    <assignField id="8" src="organDonor" field="OrganDonor"/>
                    <assignField id="9" src="address" field="Address"/>
                    <assignField id="10" src="addressComplete" field="AddressComplete"/>
                    <assignField id="11" src="addressDepartment" field="addressDepartment"/>
                    <assignField id="12" src="addressState" field="AddressState"/>
                    <assignField id="13" src="addressDisctict" field="AddressDisctict"/>
                </ML>

                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="1" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="Number"          line="1" starts="6" count="8" />
                    <field id="Opt1"            line="1" starts="15" count="1" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="12" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>
            </Back>
        </Version>
    </DocumentID>
    
    <DocumentID id="AR" iso="ARG">
        <Version id="v1" type="TD1">
            <Front>
                <FACE>
                    <region id="Signature" x="0.310" y="0.368" w="0.327" h="0.195"/>
                </FACE>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocumentNumber"  line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>
                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch id="000_0" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_1" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_2" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>

                    <findLineContent id="0" dst="ram" content="REPUBLICA@ARGENTINA@@@MERCOSUR" threshold="0.3"/>
                    <findLineContent id="1" dst="dni" content="DOCUMENTO@NACIONAL@DE@IDENTIDAD" threshold="0.3"/>
                    <findLineContent id="2" dst="rnp" content="REGISTRO@NACIONAL@DE@LAS@PERSONAS" threshold="0.3"/>
                    <rejectIfNotValid3 id="9" src="ram" src2="dni" src3="rnp"/>

                    <findLineContent id="10" dst="ape" content="APELLIDO@S" threshold="0.3"/>
                    <findLineContent id="11" dst="nom" content="NOMBRE@S" threshold="0.3"/>
                    <findLineContent id="12" dst="doc" content="NUMERO@DE@DOCUMENTO" threshold="0.3"/>

                    <assignIfValid id="20" dst="ln" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid id="21" dst="ln" src="nom" offset="-1" overwrite="false"/>

                    <assignIfValid id="22" dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid id="23" dst="fn" src="doc" offset="-1" overwrite="false"/>

                    <assignIfValid id="24" dst="docStr" src="doc" offset="+1" overwrite="false"/>
                    <matchIfValid id="25" src="docStr" dst="docNumber"
                    	regex="([0-9]+)[\.\-:, ]?([0-9]{3})[\.\-:, ]?([0-9]{3})"
                    	value="([N]$1)([N]$2)([N]$3)"
                    	overwrite="false"
                    />

                    <modifyIfValid id="30" dst="fn" op="U"/>
                    <assignField id="39" src="fn" field="FirstName"/>

                    <modifyIfValid id="40" dst="ln" op="U"/>
                    <assignField id="49" src="ln" field="LastName"/>

                    <assignField id="59" src="docNumber" field="DocumentNumber"/>
                </ML>
            </Front>
            
            <Back>
                <!-- <FACE rejector="yes"/> -->
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                    <region id="Fingerprint" x="0.644" y="0.020" w="0.276" h="0.571"/>
                </OCR>
                <PDF417 decode="splitBy:@" charset="UTF-8">
                    <!-- Data0 is always empty in this case -->
                    <field id="DocumentNumber"       data="1" />
                    <field id="Example"              data="2" />
                    <field id="Data3"                data="3" />
                    <field id="LastName"             data="4" />
                    <field id="FirstName"            data="5" />
                    <field id="NationalityCountry"   data="6" />
                    <field id="DateOfBirth"          data="7" />
                    <field id="Gender"               data="8" />
                    <field id="DateOfIssue"          data="9" />
                    <field id="NroTramite"           data="10" />
                    <field id="OfIdent"              data="11" />
                    <field id="DateOfExpiry"         data="12" />
                    <field id="Data13"               data="13" />
                    <field id="Data14"               data="14" />
                </PDF417>
                <ML cols="6" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineContent id="0" dst="addressStr" content="DOMICILIO@#" threshold="0.3"/>
                    <replaceIfValid id="1" dst="address" src="addressStr" content="DOMICILIO@" replace="" threshold="0.3"/>
                    <replaceIfValid id="2" dst="address" content=":" replace=""/>
					<rejectIfNotValid id="9" src="address"/>

					<assignIfValid id="10" dst="address2" src="address" offset="+1"/>
                    <concatenateIfValid id="11" dst="address" src="address2" prefix=" " sufix=""/>
                    <assignField id="19" src="address" field="Address"/>

                    <findLineContent id="20" dst="pobStr" content="FECHA@Y@LUGAR@DE@NACIMIENTO@#" threshold="0.3"/>
                    <assignIfValid id="21" dst="pob" src="pobStr" offset="+1"/>
                    <assignField id="29" src="pob" field="PlaceOfBirth"/>

                    <matchIfValid id="30" src="pobStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <assignField id="39" src="DoB" field="DateOfBirth"/>

                </ML>

            </Back>
        </Version>
        
        <Version id="v2" type="TD1">
            <Front>
                <FACE>
                    <region id="Signature" x="0.657" y="0.500" w="0.335" h="0.179"/>
                </FACE>
                <PDF417 decode="splitBy:@" charset="UTF-8">
                    <field id="NroTramite"        data="0" />
                    <field id="LastName"          data="1" />
                    <field id="FirstName"         data="2" />
                    <field id="Gender"            data="3" />
                    <field id="DocumentNumber"    data="4" />
                    <field id="Example"           data="5" />
                    <field id="DateOfBirth"       data="6" />
                    <field id="DateOfIssue"       data="7" />
                    <field id="CuilCode"          data="8" optional="yes" />
                </PDF417>
                <ML cols="4" split_by="elements" separation="0.04" space_separation="0.10">
                    
                    <findLineContent id="0" dst="ram" content="REPUBLICA@ARGENTINA@@@MERCOSUR" threshold="0.3"/>
                    <findLineContent id="1" dst="rnp" content="REGISTRO@NACIONAL@DE@LAS@PERSONAS" threshold="0.3"/>
                    <findLineContent id="2" dst="mit" content="MINISTERIO@DEL@INTERIOR@Y@TRANSPORTE" threshold="0.3"/>
                    <rejectIfNotValid3 id="9" src="ram" src2="rnp" src3="mit"/>

                    <findLineContent id="10" dst="ape" content="Apellido@@@Surname" threshold="0.3"/>
                    <findLineContent id="11" dst="nom" content="Nombre@@@Name" threshold="0.3"/>
                    <findLineContent id="12" dst="doc" content="Documento@@@Document" threshold="0.3"/>

                    <assignIfValid id="20" dst="ln" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid id="21" dst="ln" src="nom" offset="-1" overwrite="false"/>

                    <assignIfValid id="22" dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid id="23" dst="fn" src="ape" offset="+3" overwrite="false"/>

                    <assignIfValid id="24" dst="docStr" src="doc" offset="+1" overwrite="false"/>
                    <matchIfValid id="25" src="docStr" dst="docNumber"
                    	regex="([0-9]+)[\.\-:, ]?([0-9]{3})[\.\-:, ]?([0-9]{3})"
                    	value="([N]$1)([N]$2)([N]$3)"
                    	overwrite="false"
                    />
                    <findLineMatch id="26" src="docStr" dst="docNumber"
                    	regex="^([0-9]+)[\.\-:, ]?([0-9]{3})[\.\-:, ]?([0-9]{3})"
                    	value="([N]$1)([N]$2)([N]$3)"
                    	overwrite="false"
                    />
                    <rejectIfNotValid id="29" src="docNumber"/>

                    <modifyIfValid id="30" dst="fn" op="U"/>
                    <assignField id="39" src="fn" field="FirstName"/>

                    <modifyIfValid id="40" dst="ln" op="U"/>
                    <assignField id="49" src="ln" field="LastName"/>

                    <assignField id="59" src="docNumber" field="DocumentNumber"/>
                </ML>
            </Front>
            
            <Back>
                <!-- <FACE rejector="yes"/> -->
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocumentNumber"  line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />

                    <region id="Fingerprint" x="0.764" y="0.023" w="0.223" h="0.505"/>
                </MRZ>
                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch id="000_0" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_1" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_2" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>

                    <findLineContent id="0" dst="addressStr" content="DOMICILIO@#" threshold="0.3"/>
                    <replaceIfValid id="1" dst="address" src="addressStr" content="DOMICILIO@" replace="" threshold="0.3"/>
                    <replaceIfValid id="2" dst="address" content=":" replace=""/>
                    <rejectIfNotValid id="9" src="address"/>

                    <assignIfValid id="10" dst="address2" src="address" offset="+1"/>
                    <concatenateIfValid id="11" dst="address" src="address2" prefix=" " sufix=""/>
                    <assignField id="19" src="address" field="Address"/>

                    <findLineContent id="20" dst="pobStr" content="LUGAR@DE@NACIMIENTO@#" threshold="4"/>
                    <replaceIfValid id="21" src="pobStr" dst="pob" content="LUGAR@DE@NACIMIENTO@" replace="" threshold="4"/>
                    <assignField id="29" src="pob" field="PlaceOfBirth"/>

                    <jumpIfValid id="30_0" src="pob" dst="NO_DOB"/>

                    <findLineContent id="30" dst="pobStr" content="FECHA@Y@LUGAR@DE@NACIMIENTO@#" threshold="4"/>
                    <assignIfValid id="31" dst="pob" src="pobStr" offset="+1"/>
                    <assignField id="39" src="pob" field="PlaceOfBirth"/>

                    <matchIfValid id="40" src="pobStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <assignField id="49" src="DoB" field="DateOfBirth"/>

                    <label id="50" src="NO_DOB"/>

                </ML>                
            </Back>
        </Version>
    </DocumentID>
    
    <DocumentID id="SV" iso="SLV">
        <Version id="v1" type="TD1">
            <Front>
                <FACE/>
                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="1" dst="docNumber"
                        regex="([0-9]{8})-([0-9])"
                        value="($1)-($2)"
                    />
                    <rejectIfNotValid id="2" src="docNumber"/>
                    
                    <assignField id="3" src="docNumber" field="DocumentNumber"/>

                    <findLineContent id="10" dst="rds" content="República@de@El@Salvador" threshold="0.3"/>
                    <findLineContent id="11" dst="dui" content="Documento@Único@de@Identidad" threshold="0.3"/>

                    <findLineContent id="12" dst="as" content="Apellidos@@@Surname" threshold="0.3"/>
                    <findLineContent id="13" dst="ng" content="Nombres@@@Given@Names" threshold="0.3"/>
                    <findLineContent id="14" dst="ck" content="Conocido@por@@@Known@by" threshold="0.3"/>

                    <assignIfValid id="20" dst="ln" src="ng" offset="-1" overwrite="false"/>
                    <assignIfValid id="21" dst="fn" src="ng" offset="+1" overwrite="false"/>

                    <assignIfValid id="22" dst="ln" src="ck" offset="-3" overwrite="false"/>
                    <assignIfValid id="23" dst="fn" src="ck" offset="-1" overwrite="false"/>

                    <assignIfValid id="24" dst="ln" src="as" offset="+1" overwrite="false"/>
                    <assignIfValid id="25" dst="fn" src="as" offset="+3" overwrite="false"/>

                    <rejectIfNotValid id="30" src="ln"/>
                    <rejectIfNotValid id="31" src="fn"/>

                    <assignField id="38" src="ln" field="LastName"/>
                    <assignField id="39" src="fn" field="FirstName"/>

                    <findLineMatch id="40" dst="gender"
                        regex="^(M|F)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField id="49" src="gender" field="Gender"/>

                    <findLineContent id="50" dst="ggss" content="Género@@@Gender@Salvadoreño@por@@@Salvadorean@by" threshold="0.4"/>
                    <assignIfValid id="51" dst="sby" src="ggss" offset="+1" overwrite="false"/>
                    <assignIfValid id="52" dst="sby" src="ggss" offset="+2" overwrite="false"/>
                    <assignField id="59" src="sby" field="SalvadoreanBy"/>
                    
                    <findLineContent id="60" dst="fln" content="Fecha@y@Lugar@de@Nacimiento@@@Date@and@Place@of@Birth" threshold="0.4"/>
                    <assignIfValid id="61" dst="DoBStr" src="fln" offset="+1"/>
                    <matchIfValid id="62" dst="DoB" src="DoBStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch id="63" dst="DoB" src="DoBStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="68" src="DoB"/>
                    <assignField id="69" src="DoB" field="DateOfBirth" blocked="true"/>

                    <findLineContent id="70" dst="fle" content="Fecha@y@lugar@de@expedicion@@@Date@and@place@of@issuance" threshold="0.4"/>
                    <assignIfValid id="71" dst="DoIStr" src="fle" offset="+1"/>
                    <matchIfValid id="72" dst="DoI" src="DoIStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch id="73" dst="DoI" src="DoIStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="78" src="DoI"/>
                    <assignField id="79" src="DoI" field="DateOfIssue" blocked="true"/>

                    <!-- Let's find the landmarks we won't use to lock those lines -->
                    <findLineContent id="80" dst="nui" content="Número@Unico@de@Identidad" threshold="0.3"/>
                    <findLineContent id="81" dst="dummy" content="Unique@Id@Number" threshold="0.3"/>
                    <findLineContent id="82" dst="dummy" content="Firma@o@Huella@del@Titular" threshold="0.3"/>
                    <findLineContent id="83" dst="dummy" content="Holder@s@Signature" threshold="0.3"/>
                    <findLineContent id="84" dst="dummy" content="Registradora@Nacional@de@las@Personas@Naturales" threshold="0.3"/>
                    <findLineContent id="85" dst="dummy" content="Fecha@de@expiración@@@Date@of@expiration" threshold="0.3"/>

                    <matchIfValid id="90" dst="DoE" src="nui"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch id="91" dst="DoE" src="DoEStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="98" src="DoE"/>
                    <assignField id="99" src="DoE" field="DateOfExpiry" blocked="true"/>

                    <matchIfValid id="100" dst="PoB" src="DoBStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3}) ?(.*)"
                        value="($4)"
                        overwrite="false"
                    />
                    <assignField id="109" src="PoB" field="PlaceOfBirth"/>

                    <matchIfValid id="110" dst="PoI" src="DoIStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3}) ?(.*)"
                        value="($4)"
                        overwrite="false"
                    />
                    <assignField id="119" src="PoI" field="PlaceOfIssue"/>

                </ML>
            </Front>
            <Back>
                <PDF417 optional="yes" decode="splitBy:||" charset="UTF-8">
                    <field id="DocumentNumber"    data="0" />
                    <field id="LastName"          data="1" />
                    <field id="FirstName"         data="2" />
                    <field id="Data3"             data="3" />
                    <field id="Data4"             data="4" />
                    <field id="AddressCity"       data="5" />
                    <field id="AddressState"      data="6" />
                    <field id="BloodType"         data="7" />
                    <field id="Gender"            data="8" />
                    <field id="DateOfBirth"       data="9" />
                    <field id="DateOfExpiry"      data="10" />
                    <field id="Data11"            data="11" />
                    <field id="MaritalStatus"     data="12" />
                    <field id="ZipCode"           data="13" />
                </PDF417>
                <MRZ>
                    <field id="DocumentCode"      line="1" starts="1" count="2" />
                    <field id="Issuer"            line="1" starts="3" count="3" />
                    <field id="DocumentNumber"    line="1" starts="6" count="9" />
                    <field id="NUI_N"             line="1" starts="16" count="1" />
                    <field id="Opt1"              line="1" starts="16" count="15" />
                    <field id="DateOfBirth"       line="2" starts="1" count="6" />
                    <field id="Gender"            line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"      line="2" starts="9" count="6" />
                    <field id="Nationality"       line="2" starts="16" count="3" />
                    <field id="Opt2"              line="2" starts="19" count="11" />
                    <field id="LastName"          line="3" starts="1" count="??" />
                    <field id="FirstName"         line="3" starts="??" count="30" />

                    <field id="NfcKey"            line="1" starts="6" count="9" />
                </MRZ>
                <ML cols="3" split_by="lines" separation="0.04" space_separation="0.10">
                    <findLineContent id="1" dst="res" content="Residencia@@@Address" threshold="0.3"/>
                    <assignIfValid id="2" dst="address" src="res" offset="+1"/>
                    <assignField id="9" src="address" field="Address"/>

                    <findLineContent id="10" dst="municipio" content="Municipio@@@City" threshold="0.3"/>
                    <assignIfValid id="11" dst="city" src="municipio" offset="+1"/>
                    <assignField id="19" src="city" field="City"/>

                    <findLineContent id="20" dst="departamento" content="Departamento@@@State" threshold="0.3"/>
                    <assignIfValid id="21" dst="state" src="departamento" offset="+1"/>
                    <assignField id="29" src="state" field="State"/>

                    <findLineContent id="30" dst="tram" content="Trámite@@@Procedure@Type" threshold="0.3"/>
                    <assignIfValid id="31" dst="procedure" src="tram" offset="+1"/>
                    <assignField id="39" src="procedure" field="ProcedureType"/>

                    <findLineContent id="40" dst="zona" content="Código@de@Zona@@@Zip@Code" threshold="0.3"/>
                    <findLineMatch id="41" dst="zipcode"
                        regex="^([0-9OIlSBA]{9})([A-Za-z]?)$"
                        value="([N]$1)([U]$2)"
                        overwrite="false"
                    />
                    <assignIfValid id="42" dst="zipcode" src="zona" offset="+1" overwrite="false"/>
                    <assignField id="49" src="zipcode" field="ZipCode"/>

                    <findLineContent id="50" dst="ef" content="Estado@Familiar@@@Marital@Status" threshold="0.3"/>
                    <assignIfValid id="51" dst="ms" src="ef" offset="+1"/>
                    <assignField id="59" src="ms" field="MaritalStatus"/>

                    <findLineContent id="60" dst="ndlm" content="Nombre@de@la@Madre@@@Mother@s@Name" threshold="0.3"/>
                    <assignIfValid id="61" dst="mother" src="ndlm" offset="+1"/>
                    <assignField id="69" src="mother" field="MotherName"/>

                    <findLineContent id="70" dst="ndp" content="Nombre@del@Padre@@@Father@s@Name" threshold="0.3"/>
                    <assignIfValid id="71" dst="father" src="ndp" offset="+1"/>
                    <assignField id="79" src="father" field="FatherName"/>

                    <findLineMatch id="80" dst="blood" src="bloodStr"
                        regex="^(AB|A|B|[0Oo]) ?[RPB][HA8] ?([+-])$"
                        value="([U]$1) RH ($2)"
                        overwrite="false"
                    />
                    <assignField id="89" src="blood" field="BloodType"/>

                    <findLineMatch id="90" dst="proctype"
                        regex="^([A-Za-z]{2})-([0-9OIlSBA])$"
                        value="([U]$1)-([N]$2)"
                        overwrite="false"
                    />
                    <assignField id="99" src="proctype" field="ProcedureType"/>

                    <findLineMatch id="100" dst="nit"
                        regex="^([0-9OIlSBA]{4})-([0-9OIlSBA]{6})-([0-9OIlSBA]{3})-([0-9OIlSBA])$"
                        value="([N]$1)-([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <assignField id="109" src="nit" field="NIT"/>

                    <!-- We block MRZ lines before atempting to read Spouse's Name -->
                    <findLineMatch id="000_0" dst="mrzLine1" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_1" dst="mrzLine2" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_2" dst="mrzLine3" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>

                    <findLineContent id="110" dst="csn" content="Cónyuge@@@Spouse@s@Name" threshold="0.3"/>
                    <assignIfValid id="111" dst="spouse" src="csn" offset="+1"/>
                    <assignField id="119" src="spouse" field="SpouseName"/>

                </ML>
            </Back>

        </Version>
    </DocumentID>

    <DocumentID id="EC" iso="ECU">
        <Version id="v1" type="TD1">
            <Front>
                <FACE/>
                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">

                    <postProcessImage dst=""
                        nonLinear="true"
                        rMin="0.000" rMax="0.999"
                        gMin="0.000" gMax="0.999"
                        bMin="0.000" bMax="0.999"
                    />

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="10" dst="docNumber"
                        regex="([0-9oOl]{9})-([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                    />
                    <rejectIfNotValid id="18" src="docNumber"/>
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent id="20" dst="dataRepublicaEcuador" content="REPUBLICA@DEL@ECUADOR" threshold="0.3"/>
                    <findLineContent id="21" dst="dataDireccionGeneral" content="DIRECCION@GENERAL@DE@REGISTRO@CIVIL" threshold="0.3"/>
                    <findLineContent id="22" dst="dataIdentificacionYCedulacion" content="IDENTIFICACION@Y@CEDULACION" threshold="0.3"/>
                    <findLineContent id="23" dst="dataCedulaDe" content="CEDULA@DE" threshold="0.3"/>
                    <findLineContent id="24" dst="dataSurnameAndName" content="APELLIDOS@Y@NOMBRE" threshold="0.3"/>
                    <findLineContent id="25" dst="dataPlaceOfBirth" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
                    <findLineContent id="26" dst="dataDateOfBirth" content="FECHA@DE@NACIMIENTO" threshold="0.3"/>
                    <findLineContent id="27" dst="dataNationality" content="NACIONALIDAD" threshold="0.3"/>
                    <findLineContent id="28" dst="dataSign" content="FIRMA@DEL@CEDULADO" threshold="0.3"/>

                    <assignIfValid id="30_1" dst="fn" src="dataSurnameAndName" offset="+2" overwrite="false"/>
                    <assignIfValid id="30_2" dst="fn" src="dataPlaceOfBirth" offset="-1" overwrite="false"/>
                    <rejectIfNotValid id="37" src="fn"/>
                    <modifyIfValid id="38" dst="fn" op="U"/>
                    <assignField id="39" src="fn" field="FirstName"/>

                    <assignIfValid id="40_1" dst="ln" src="dataSurnameAndName" offset="+1" overwrite="false"/>
                    <assignIfValid id="40_2" dst="ln" src="dataPlaceOfBirth" offset="-2" overwrite="false"/>
                    <rejectIfNotValid id="47" src="ln"/>
                    <modifyIfValid id="48" dst="ln" op="U"/>
                    <assignField id="49" src="ln" field="LastName"/>


                    <findLineMatch id="50" src="lineDob" dst="dob"
                        regex="([1-2l][0-9oOl]{3})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})"
                        value="([N]$3)/([N]$2)/([N]$1)"
                    />
                    <rejectIfNotValid id="58" src="dob"/>
                    <assignField id="59" src="dob" field="DateOfBirth"/>

                    <assignIfValid id="60_1" dst="pob" src="dataPlaceOfBirth" offset="+1"/>
                    <assignIfValid id="60_2" dst="pob1" src="dataPlaceOfBirth" offset="+2"/>
                    <assignIfValid id="60_3" dst="pob2" src="dataPlaceOfBirth" offset="+3"/>
                    <concatenateIfValid id="61_1" dst="pob" src="pob1" prefix=" - " sufix=""/>
                    <concatenateIfValid id="61_2" dst="pob" src="pob2" prefix=" - " sufix=""/>
                    <rejectIfNotValid id="67" src="pob"/>
                    <assignField id="69" src="pob" field="PlaceOfBirth"/>

                    <assignIfValid id="71" dst="lineNationality" src="lineDob" offset="+1" overwrite="false"/>
                    <replaceIfValid id="72" src="lineNationality" dst="nationality" content="NACIONALIDAD" replace="" threshold="0.3"/>
                    <assignIfContent id="73" dst="nationalityJump" src="nationality" value="JUMP"
                        op="not_equal_length" param="$lineNationality" param_2="0.2"
                        overwrite="false"
                    />
                    <jumpIfNotValid id="74" src="nationalityJump" dst="jumpNationality" />
                    <modifyIfValid id="78" dst="nationality" op="U"/>
                    <assignField id="79" src="nationality" field="Nationality"/>

                    <assignIfValid id="80" dst="dataSex" src="lineNationality" offset="+1"/>
                    <assignIfContent id="81_1" src="dataSex" dst="sex" value="M"
                        op="distance" param="SEXO HOMBRE" param_2="0.2"
                        overwrite="false"
                    />
                    <assignIfContent id="81_2" src="dataSex" dst="sex" value="F"
                        op="distance" param="SEXO MUJER" param_2="0.2"
                        overwrite="false"
                    />
                    <assignIfContent3 id="81_3" src="dataSex" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        op3="not_contains" param3="H"
                        overwrite="false"
                    />
                    <assignIfContent2 id="81_4" src="dataSex" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    <assignField id="89" src="sex" field="Gender"/>

                    <label id="89_9" src="jumpNationality"/>

                    <findLineContent id="90" dst="civiStatus" content="ESTADO@CIVIL#" threshold="0.3"/>
                    <replaceIfValid id="91_1" dst="civiStatus" content="ESTADO" replace="" threshold="2" />
                    <replaceIfValid id="91_2" dst="civiStatus" content="CIVIL" replace="" threshold="2" />
                    <modifyIfValid id="98" dst="civiStatus" op="T,U"/>
                    <assignField id="99" src="civiStatus" field="CivilStatus"/>
                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch id="00_0" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)" />
                    <findLineMatch id="00_1" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)" />
                    <findLineMatch id="00_2" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)" />

                    <findLineMatch id="00" dst="fingerprint"
                        regex="^([a-zA-Z0-9])([0-9]{4})([a-zA-Z0-9])([0-9]{4})$"
                        value="([U]$1)($2)([U]$3)($4)"
                    />
                    <rejectIfNotValid id="07" src="fingerprint"/>
                    <assignField id="09" src="fingerprint" field="FingerprintCode"/>

                    <findLineContent id="20" dst="ins" content="INSTRUCCIÓN" threshold="0.2"/>
                    <findLineContent id="21" dst="prof" content="PROFESIÓN@@@OCUPACIÓN" threshold="0.2"/>
                    <findLineContent id="22" dst="ap" content="APELLIDOS@Y@NOMBRES@DEL@PADRE" threshold="0.2"/>
                    <findLineContent id="23" dst="am" content="APELLIDOS@Y@NOMBRES@DE@LA@MADRE" threshold="0.2"/>
                    <findLineContent id="24" dst="lfi" content="LUGAR@Y@FECHA@DE@EXPEDICIÓN" threshold="0.2"/>
                    <findLineContent id="25" dst="fe" content="FECHA@DE@EXPIRACIÓN" threshold="0.2"/>
                    <rejectIfNotValid id="27_1" src="lfi"/>
                    <rejectIfNotValid id="27_2" src="fe"/>

                    <assignIfValid id="30" dst="poi" src="lfi" offset="+1"/>
                    <matchIfValid id="31" dst="poiError"
                        regex="([1-2l][0-9oOl]{3})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})"
                        value="([N]$3)/([N]$2)/([N]$1)"
                    />
                    <rejectIfValid id="37" src="poiError"/>
                    <modifyIfValid id="38" dst="poi" op="U"/>
                    <assignField id="39" src="poi" field="PlaceOfIssue"/>

                    <assignIfValid id="40_1" dst="doi" src="fe" offset="-1" overwrite="false"/>
                    <assignIfValid id="40_2" dst="doi" src="lfi" offset="+2" overwrite="false"/>
                    <matchIfValid id="41" dst="doi"
                        regex="([1-2l][0-9oOl]{3})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})"
                        value="([N]$3)/([N]$2)/([N]$1)"
                    />
                    <rejectIfNotValid id="47" src="doi"/>
                    <assignField id="49" src="doi" field="DateOfIssue"/>

                    <assignIfValid id="50" dst="doe" src="fe" offset="+1"/>
                    <matchIfValid id="51" dst="doe"
                        regex="([1-2l][0-9oOl]{3})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})"
                        value="([N]$3)/([N]$2)/([N]$1)"
                    />
                    <rejectIfNotValid id="57" src="doe"/>
                    <assignField id="59" src="doe" field="DateOfExpiry"/>
                </ML>
            </Back>
        </Version>

        <Version id="v2" type="TD1">
            <Front>
                <FACE/>
                <ML cols="2" split_by="elements" separation="0.04" space_separation="0.10">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="0" dst="rde" content="REPUBLICA@DEL@ECUADOR" threshold="0.3"/>
                    <findLineContent id="1" dst="crde" content="CEDULA@REPUBLICA@DEL@ECUADOR" threshold="0.3"/>
                    <findLineContent id="2" dst="dgrc" content="DIRECCION@GENERAL@DE@REGISTRO@CIVIL@@IDENTIFICACION@Y@CEDULACION" threshold="0.3"/>
                    <rejectIfNotValid2 id="8" src="rde" src2="crde"/>
                    <rejectIfNotValid id="9" src="dgrc"/>

                    <findLineContent id="10" dst="ape" content="APELLIDOS" threshold="0.3"/>
                    <findLineContent id="11" dst="nom" content="NOMBRES" threshold="0.3"/>
                    <findLineContent id="12" dst="nac" content="NACIONALIDAD" threshold="0.3"/>
                    <findLineContent id="13" dst="fdn" content="FECHA@DE@NACIMIENTO" threshold="0.2"/>
                    <findLineContent id="14" dst="ldn" content="LUGAR@DE@NACIMIENTO" threshold="0.2"/>
                    <findLineContent id="15" dst="fdt" content="FIRMA@DEL@TITULAR" threshold="0.2"/>
                    <findLineContent id="16" dst="sex" content="SEXO" threshold="0.3"/>
                    <findLineContent id="17" dst="doc" content="No@@DOCUMENTO" threshold="0.3"/>
                    <findLineContent id="18" dst="fdv" content="FECHA@DE@VENCIMIENTO" threshold="0.3"/>
                    <findLineContent id="19" dst="natcanStr" content="NAT@CAN" threshold="0.3"/>

                    <assignIfValid id="20" dst="ln1" src="ape" offset="+1"/>
                    <assignIfValid id="21" dst="ln2" src="ape" offset="+2"/>
                    <assignIfValid id="22" dst="ln" src="ln1"/>
                    <concatenateIfValid id="23" dst="ln" src="ln2" prefix=" " sufix=""/>
                    <rejectIfNotValid id="25" src="ln"/>
                    <assignField id="27" src="ln1" field="LastName1"/>
                    <assignField id="28" src="ln2" field="LastName2"/>
                    <assignField id="29" src="ln" field="LastName"/>

                    <assignIfValid id="20_" dst="fn" src="nom" offset="+1"/>
                    <rejectIfNotValid id="28_" src="fn"/>
                    <assignField id="29_" src="fn" field="FirstName"/>

                    <assignIfValid id="30" dst="nationality" src="nac" offset="+1"/>
                    <assignField id="39" src="nationality" field="Nationality"/>

                    <findLineMatch id="40" src="DoBStr" dst="DoB"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="48" src="DoB"/>
                    <assignField id="49" src="DoB" field="DateOfBirth"/>

                    <assignIfValid id="50" dst="pob" src="ldn" offset="+1"/>
                    <assignIfValid id="51" dst="pob2" src="ldn" offset="+2"/>
                    <concatenateIfValid id="52" dst="pob" src="pob2" prefix=" - " sufix=""/>
                    <assignField id="59" src="pob" field="PlaceOfBirth"/>

                    <findLineContent id="60" dst="sexStr" content="HOMBRE" threshold="1" overwrite="false"/>
                    <findLineContent id="61" dst="sexStr" content="MUJER" threshold="1" overwrite="false"/>
                    <assignIfContent id="62" src="sexStr" dst="sexo" value="M"
                        op="distance" param="HOMBRE" param_2="1"
                        overwrite="false"
                    />
                    <assignIfContent id="63" src="sexStr" dst="sexo" value="F"
                        op="distance" param="MUJER" param_2="1"
                        overwrite="false"
                    />
                    <assignField id="69" src="sexo" field="Gender"/>

                    <findLineMatch id="70" dst="nui"
                        regex="^[a-zA-Z]{3}\.?([0-9]{10})$"
                        value="([N]$1)"
                    />
                    <rejectIfNotValid id="78" src="nui"/>
                    <assignField id="79" src="nui" field="NUI"/>
    
                    <findLineMatch id="80" dst="docNumber"
                        regex="^([0-9]{9})$"
                        value="([N]$1)"
                    />
                    <rejectIfNotValid id="88" src="docNumber"/>
                    <assignField id="89" src="docNumber" field="DocumentNumber"/>

                    <findLineMatch id="90" src="DoEStr" dst="DoE"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="98" src="DoE"/>
                    <assignField id="99" src="DoE" field="DateOfExpiry"/>

                    <assignIfValid id="100" dst="natcan" src="natcanStr" offset="+1"/>
                    <assignField id="109" src="natcan" field="NAT_CAN"/>

                </ML>
            </Front>

            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocumentNumber"  line="1" starts="6" count="9" />
                    <field id="NUI"             line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ> 

                <ML cols="2" split_by="elements" separation="0.10" space_separation="0.10">
                    
                    <findLineMatch id="00" dst="fingerprint"
                        regex="^([a-zA-Z0-9])([0-9]{4})([a-zA-Z0-9])([0-9]{4})$"
                        value="([U]$1)($2)([U]$3)($4)"
                    />
                    <rejectIfNotValid id="07" src="fingerprint"/>
                    <assignField id="09" src="fingerprint" field="FingerprintCode"/>

                    <findLineContent id="10" dst="ecivil" content="ESTADO@CIVIL" threshold="0.3"/>
                    <assignIfValid id="11" dst="maritalStatus" src="ecivil" offset="+1"/>
                    <assignField id="19" src="maritalStatus" field="MaritalStatus"/>

                    <findLineMatch id="90" src="DoIStr" dst="DoI"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="98" src="DoI"/>
                    <assignField id="99" src="DoI" field="DateOfIssue"/>

                </ML>
            </Back>
        </Version>

    </DocumentID>

    <DocumentID id="HN" iso="HND">
        <Version id="v1" type="TD1">
            <Front>
                <FACE/>
                <BARCODE optional="yes"/>
                <ML cols="3" split_by="elements" separation="0.10" space_separation="0.02">

                    <postProcessImage dst=""
                        rMin="0.000" rMax="1.000"
                        gMin="0.000" gMax="1.000"
                        bMin="0.150" bMax="0.850"
                        rWeight="0.000"
                        gWeight="0.000"
                        bWeight="1.000"
                    />

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <!-- We check for drivers license -->
                    <findLineContent id="00" dst="dndt" content="DIRECCIÓN@NACIONAL@DE@TRÁNSITO" threshold="0.3"/>
                    <findLineContent id="01" dst="ldc" content="Licencia@de@Conducir" threshold="0.3"/>
                    <rejectIfValid id="08" src="dndt"/>
                    <rejectIfValid id="09" src="ldc"/>

                    <findLineMatch id="10" dst="docNumber"
                        regex="([a-zA-Z0-9]{4})-([a-zA-Z0-9]{4})-([a-zA-Z0-9]{5})"
                        value="([N]$1)-([N]$2)-([N]$3)"
                    />
                    <rejectIfNotValid id="18" src="docNumber"/>
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent id="30" dst="rdh" content="REPUBLICA@DE@HONDURAS" threshold="0.3"/>
                    <findLineContent id="40" dst="rndlp" content="REGISTRO@NACIONAL@DE@LAS@PERSONAS" threshold="0.3"/>
                    <findLineContent id="50" dst="tdi" content="TARJETA@DE@IDENTIDAD" threshold="0.3"/>
                    <rejectIfNotValid3 id="59" src="rdh" src2="rndlp" src3="tdi"/>

                    <findLineContent id="60" dst="hon_por" content="HONDUREÑ@ POR :#" threshold="0.2"/>
                    <replaceIfValid id="61" dst="hon_por" content=":" replace=""/>
                    <replaceIfValid id="62" dst="hon_por" content="HONDUREÑ@" replace="" threshold="0.2"/>
                    <replaceIfValid id="63" dst="hon_por" content="POR" replace="" threshold="0.2"/>
                    <assignField id="69" src="hon_por" field="HonduranBy"/>

                    <findLineContent id="70" dst="DoBStr" content="NACIO@EL#" threshold="0.3"/>
                    <matchIfValid id="71" src="DoBStr" dst="DoB"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="78" src="DoB"/>
                    <assignField id="79" src="DoB" field="DateOfBirth"/>

                    <findLineContent id="80" dst="sexStr" content="SEXO#" threshold="1"/>
                    <assignIfContent id="81" src="sexStr" dst="sex" value="M"
                        op="distance" param="SEXO@@MASCULINO" param_2="3"
                        overwrite="false"
                    />
                    <assignIfContent id="82" src="sexStr" dst="sex" value="F"
                        op="distance" param="SEXO@@FEMENINO" param_2="3"
                        overwrite="false"
                    />
                    <assignField id="89" src="sex" field="Gender"/>
                    

                    <findLineContent id="90" dst="DoIStr" content="EMITIDA@EL#" threshold="0.3"/>
                    <matchIfValid id="91" src="DoIStr" dst="DoI"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="98" src="DoI"/>
                    <assignField id="99" src="DoI" field="DateOfIssue"/>

                    <assignIfValid id="110" dst="fullN" src="tdi" offset="+1" overwrite="false"/>
                    <assignIfValid id="111" dst="fullN" src="hon_por" offset="-1" overwrite="false"/>
                    <splitIfValid2 id="112" src="fullN" by="/"
                        dst1="fn"
                        dst2="ln"
                        overwrite="false"
                    />
                    <splitIfValid2 id="113" src="fullN" by=" I "
                        dst1="fn"
                        dst2="ln"
                        overwrite="false"
                    />
                    <assignField id="117" src="fn" field="FirstName"/>
                    <assignField id="118" src="ln" field="LastName"/>
                    <assignField id="119" src="fullN" field="FullName"/>
                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <PDF417 decode="splitBy:," charset="UTF-8">
                    <field id="Barcode"           data="0" />
                    <field id="Barcode#"          data="1" />
                    <field id="DocumentNumber#"   data="2" />
                    <field id="FirstName1"        data="3" />
                    <field id="FirstName2"        data="4" />
                    <field id="LastName1"         data="5" />
                    <field id="LastName2"         data="6" />
                    <field id="Data7"             data="7" />
                    <field id="Data8"             data="8" />
                    <field id="Data9"             data="9" />
                    <field id="BirthDate"         data="10" />
                    <field id="FatherLastName1"   data="11" />
                    <field id="FatherLastName2"   data="12" />
                    <field id="FatherFirstName1"  data="13" />
                    <field id="FatherFirstName2"  data="14" />
                    <field id="FatherFirstName3"  data="15" />
                    <field id="MotherLastName1"   data="16" />
                    <field id="MotherLastName2"   data="17" />
                    <field id="MotherFirstName1"  data="18" />
                    <field id="MotherFirstName2"  data="19" />
                    <field id="MotherFirstName3"  data="20" />
                    <field id="Data21"            data="21" />
                </PDF417>
                <ML cols="1" split_by="lines" separation="0.10" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="10" dst="docNumber"
                        regex="([a-zA-Z0-9]{4})-([a-zA-Z0-9]{4})-([a-zA-Z0-9]{5})"
                        value="([N]$1)-([N]$2)-([N]$3)"
                    />
                    <rejectIfNotValid id="11" src="docNumber"/>
                    <assignField id="12" src="docNumber" field="DocumentNumber"/>

                    <assignIfValid id="20" dst="fullN" src="docNumber" offset="-1"/>
                    <splitIfValid2 id="21" by="/" dst="fullN"
                        dst1="fn"
                        dst2="ln"
                        overwrite="false"
                    />
                    <splitIfValid2 id="22" by=" I " dst="fullN"
                        dst1="fn"
                        dst2="ln"
                        overwrite="false"
                    />
                    <assignField id="27" src="fn" field="FirstName"/>
                    <assignField id="28" src="ln" field="LastName"/>
                    <assignField id="29" src="fullN" field="FullName"/>
                </ML>
            </Back>

        </Version>

        <Version id="v2" type="TD1">
            <Front>
                <FACE/>
                <ML cols="2" split_by="elements" separation="0.10" space_separation="0.02">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <!-- We check for drivers license -->
                    <findLineContent id="00" dst="dndt" content="DIRECCIÓN@NACIONAL@DE@TRÁNSITO" threshold="0.3"/>
                    <findLineContent id="01" dst="ldc" content="Licencia@de@Conducir" threshold="0.3"/>
                    <rejectIfValid id="08" src="dndt"/>
                    <rejectIfValid id="09" src="ldc"/>

                    <findLineMatch id="10" dst="docNumber"
                        regex="([a-zA-Z0-9]{4}) ([a-zA-Z0-9]{4}) ([a-zA-Z0-9]{5})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <rejectIfNotValid id="18" src="docNumber"/>
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent id="20" dst="rdh" content="REPUBLICA@DE@HONDURAS" threshold="0.3"/>
                    <findLineContent id="21" dst="rndlp" content="REGISTRO@NACIONAL@DE@LAS@PERSONAS" threshold="0.3"/>
                    <findLineContent id="22" dst="dni" content="DOCUMENTO@NACIONAL@DE@IDENTIFICACION" threshold="0.3"/>
                    <rejectIfNotValid2 id="28" src="rdh" src2="rndlp"/>
                    <rejectIfNotValid id="29" src="dni"/>

                    <findLineMatch id="30" dst="DoB"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <assignField id="39" src="DoB" field="DateOfBirth"/>

                    <findLineMatch id="40" dst="DoE"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <assignField id="49" src="DoE" field="DateOfExpiry"/>

                    <findLineContent id="50" dst="nom" content="NOMBRE@@@FORENAME" threshold="0.3"/>
                    <findLineContent id="51" dst="ape" content="APELLIDO@@@SURNAME" threshold="0.3"/>
                    <findLineContent id="52" dst="fecha_nac" content="FECHA@DE@NACIMIENTO@@@DATE@OF@BIRTH@NUMERO@DE@IDENTIFICACION@@@ID@NUMBER" threshold="0.3"/>
                    <findLineContent id="53" dst="fecha_nac" content="FECHA@DE@NACIMIENTO@@@DATE@OF@BIRTH" threshold="0.3" overwrite="false"/>

                    <assignIfValid id="60" dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid id="61" dst="ln" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid id="62" dst="fn" src="ape" offset="-1" overwrite="false"/>
                    <assignIfValid id="63" dst="ln" src="fecha_nac" offset="-1" overwrite="false"/>
                    <assignField id="68" src="fn" field="FirstName"/>
                    <assignField id="69" src="ln" field="LastName"/>

                    <findLineContent id="70" dst="nacionalidad" content="NACIONALIDAD@@@NATIONALITY@FECHA@DE@EXPIRACION@@@DATE@OF@EXPIRY" threshold="0.3"/>
                    <findLineContent id="71" dst="nacionalidad" content="NACIONALIDAD@@@NATIONALITY" threshold="0.3" overwrite="false"/>
                    <assignIfValid id="72" dst="nat" src="nacionalidad" offset="+1" overwrite="false"/>
                    <assignField id="79" src="nat" field="Nationality"/>

                    <findLineContent id="80" dst="lugar" content="LUGAR@DE@NACIMIENT@@@PLACE@OF@BIRTH" threshold="0.3"/>
                    <assignIfValid id="81" dst="pob" src="lugar" offset="+1" overwrite="false"/>
                    <assignField id="89" src="pob" field="PlaceOfBirth"/>

                </ML>
            </Front>
            
            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocNumberMRZ"    line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ> 
                <!-- types: DATAMATRIX,QRCODE,EAN8,EAN13,CODE39,CODE128 -->
                <BARCODE types="QRCODE" optional="yes"/>

                <ML cols="1" split_by="lines" separation="0.10" space_separation="0.10">
                    
                    <findLineContent id="10" dst="addressStr" content="DOMICILIO@@@ADDRESS" threshold="0.3"/>
                    <rejectIfNotValid id="19" src="addressStr"/>                    

                    <assignIfValid id="20" dst="address" src="addressStr" offset="+1" overwrite="false"/>
                    <assignIfValid id="21" dst="address2" src="addressStr" offset="+2" overwrite="false"/>
                    <concatenateIfValid id="22" dst="address" src="address2" prefix=" - " sufix=""/>
                    <assignField id="29" src="address" field="Address"/>

                </ML>
            </Back>

        </Version>        
    </DocumentID>

    <DocumentID id="CO" iso="COL">
        <Version id="v1" type="TD1" priority="PDF417,BARCODE,MRZ,ML,OCR,INPUT">
            <Front>
                <FACE/>
                <ML cols="1" split_by="lines" separation="0.08" space_separation="0.10">

                    <findLineContent id="0" dst="rdc" content="REPUBLICA@DE@COLOMBIA" threshold="0.3"/>
                    <findLineContent id="1" dst="ip" content="IDENTIFICACION@PERSONAL" threshold="0.3"/>
                    <findLineContent id="2" dst="cdc" content="CEDULA@DE@CIUDADANIA" threshold="0.3"/>

                    <findLineContent id="3" dst="num" content="NUMERO" threshold="3"/>

                    <findLineContent id="10" dst="ape" content="APELLIDOS" threshold="0.3"/>
                    <findLineContent id="20" dst="nom" content="NOMBRES" threshold="0.3"/>

                    <!-- X.XXX.XXX.XXX -->
                    <findLineMatch id="30" dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3})$"
                        value="([N]$1).([N]$2).([N]$3).([N]$4)"
                    />
                    <!-- XX.XXX.XXX -->
                    <findLineMatch id="31" dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3})$"
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <!-- XX.XXX.XXX (We test again with a space at the end) -->
                    <findLineMatch id="32" dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3}) "
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <rejectIfNotValid id="38" src="docNumber"/>
                    <assignField id="39" src="docNumber" field="DocumentNumber"/>
                    
                    <assignIfValid id="40" dst="ln" src="ape" offset="-1" overwrite="false"/>
                    <assignIfValid id="41" dst="fn" src="ape" offset="+1" overwrite="false"/>
                    <rejectIfNotValid id="48" src="ln"/>
                    <rejectIfNotValid id="49" src="fn"/>

                    <modifyIfValid id="50" dst="ln" op="U"/>
                    <modifyIfValid id="51" dst="fn" op="U"/>
                    <assignField id="58" src="ln" field="LastName"/>
                    <assignField id="59" src="fn" field="FirstName"/>

                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="1" split_by="lines" separation="0.01" space_separation="0.10">

                    <findLineMatch id="1" dst="mark"
                        regex="([A-Z][- \.]?[0-9OIlSBA]{7,}[- \.]?[0-9OIlSBA]{8,}[- \.]?[A-Z][- \.]?[0-9OIlSBA]{10,}[- \.]?[0-9OIlSBA]{8,})"
                        value="($1)"
                    />
                    <rejectIfNotValid id="9" src="mark"/>

                    <findLineMatch id="10" dst="DoB"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <rejectIfNotValid id="18" src="DoB"/>
                    <assignField id="19" src="DoB" field="DateOfBirth"/>

                    <findLineContent id="20_0" dst="ldn" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
                    <findLineContent id="20_1" dst="est" content="ESTATURA" threshold="0.3"/>
                    <findLineContent id="20_2" dst="gsrh" content="G@S@@RH" threshold="0.3"/>
                    <findLineContent id="20_3" dst="sexo" content="SEXO" threshold="0.3"/>
                    <findLineContent id="20_4" dst="inderecho" content="INDICE@DERECHO" threshold="0.3"/>

                    <assignIfValid id="21" dst="PoB1" src="ldn" offset="-2"/>
                    <assignIfValid id="22" dst="PoB2" src="ldn" offset="-1"/>
                    <modifyIfValid id="23" dst="PoB1" op="U"/>
                    <modifyIfValid id="24" dst="PoB2" op="U"/>
                    <assignIfValid id="25" dst="PoB" src="PoB1"/>
                    <concatenateIfValid id="26" dst="PoB" src="PoB2" prefix=" " sufix=""/>
                    <assignField id="27" src="PoB" field="PlaceOfBirth"/>
                    <assignField id="28" src="PoB1" field="PlaceOfBirth1"/>
                    <assignField id="29" src="PoB2" field="PlaceOfBirth2"/>

                    <findLineMatch id="30" dst="height"
                        regex="^([1-2]\.[0-9]{2})$"
                        value="($1)"
                    />
                    <assignField id="39" src="height" field="Height"/>

                    <findLineMatch id="40" dst="bt"
                        regex="^(A|B|8|0|O|o|AB|A8) ?(\+|\-)$"
                        value="([U]$1)($2)"
                    />
                    <findLineMatch id="41" dst="bt"
                        regex=" (A|B|8|0|O|o|AB|A8) ?(\+|\-) "
                        value="([U]$1)($2)"
                        overwrite="false"
                    />
                    <assignField id="49" src="bt" field="BloodType"/>

                    <findLineContent id="50" dst="fle" content="FECHA@Y@LUGAR@DE@EXPEDICION"/>
                    <assignIfValid id="51" dst="doiStr" src="fle" offset="-1"/>
                    <matchIfValid id="52" dst="DoI" src="doiStr"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch id="53" dst="DoI"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="58" src="DoI"/>
                    <assignField id="59" src="DoI" field="DateOfIssue"/>

                    <findLineMatch id="60" dst="sex"
                        regex="^([M|F])$"
                        value="($1)" 
                        overwrite="false"
                    />
                    <assignField id="69" src="sex" field="Gender"/>

                </ML>
            </Back>

        </Version>
    </DocumentID>

    <DocumentID id="BR" iso="BRA">
        <Version id="ID-SP" type="TD1">
            <Front>
                <OCR>
                    <region id="Face" x="0.500" y="0.244" w="0.422" h="0.446" r="90"/>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000" />
                </OCR>
                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>
                    
                    <findLineContent id="0" dst="esp" content="ESTADO@DE@SAO@PAULO" threshold="0.3"/>
                    <findLineContent id="1" dst="ssp" content="SECRETARIA@DA@SEGURANÇA@PÚBLICA" threshold="0.3"/>
                    <findLineContent id="2" dst="idi" content="INSTITUTO@DE@IDENTIFICAÇAO@RICARDO@GUMBLETON@DAUNT" threshold="0.3"/>
                    <findLineContent id="3" dst="rfb" content="REPÚBLICA@FEDERATIVA@DO@BRASIL" threshold="0.3"/>

                    <rejectIfNotValid4 id="9" src="esp" src2="ssp" src3="idi" src4="rfb"/>

                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000" />
                </OCR>
                <ML cols="2" split_by="elements" separation="0.15" space_separation="0.00"> <!-- 0.05 -->

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="0" src="regGeneral" dst="docNumber"
                        regex="([0-9oOl]+)[\.,]? ?([0-9oOl]{3})[\.,]? ?([0-9oOl]{3}) ?[\.,-]+ ?([0-9oOl])"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <rejectIfNotValid id="8" src="docNumber"/>
                    <assignField id="9" src="docNumber" field="DocumentNumber"/>

                    <!-- Search in the same line as regGeneral -->
                    <matchIfValid id="10" src="regGeneral" dst="DoI"
                        regex="([0-9oOl]{2})[\/7] ?([0-9oOl]{2}|[A-Z0-9oOl][A-Z][A-Z]|[A-Z][A-Z0-9oOl][A-Z]|[A-Z][A-Z][A-Z0-9oOl])[\/7] ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <jumpIfValid id="11" src="DoI" dst="DoIFound"/>

                    <findLineMatch id="20" src="doi" dst="DoI"
                        regex="([0-9oOl]{2})[\/7] ?([0-9]{2}|[A-Z0-9oOl][A-Z][A-Z]|[A-Z][A-Z0-9oOl][A-Z]|[A-Z][A-Z][A-Z0-9oOl])[\/7] ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <label id="27" src="DoIFound"/>
                    <rejectIfNotValid id="28" src="DoI"/>
                    <assignField id="29" src="DoI" field="DateOfIssue"/>

                    <findLineMatch id="30" src="dob" dst="DoB"
                        regex="([0-9oOl]{2})[\/7] ?([0-9]{2}|[A-Z0-9oOl][A-Z][A-Z]|[A-Z][A-Z0-9oOl][A-Z]|[A-Z][A-Z][A-Z0-9oOl])[\/7] ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="38" src="DoB"/>
                    <assignField id="39" src="DoB" field="DateOfBirth"/>

                    <findLineMatch id="40" src="cpfLine" dst="cpf"
                        regex="([0-9oOl]{9})[\/7 ]([0-9oOl]{2})"
                        value="([N]$1)/([N]$2)"
                    />
                    <assignField id="49" src="cpf" field="CPF"/>

                    <findLineMatch id="50" src="nameLine" dst="name"
                        regex="^([nN][oO0][mM]E)$"
                        value="($1)"
                    />
                    <assignIfValid id="51" dst="fn" src="name" offset="+1"/>
                    <jumpIfValid id="59" src="fn" dst="nameFound"/>

                    <findLineMatch id="60" src="nameLine" dst="fn"
                        regex="(?:[nN][oO0][mM]E) (.*)"
                        value="($1)"
                    />
                    <jumpIfValid id="61" src="fn" dst="nameFound"/>

                    <findLineMatch id="62" src="nameLine" dst="fn"
                        regex="(?:^[oO0][mM]E) (.*)"
                        value="($1)"
                    />
                    <jumpIfValid id="63" src="fn" dst="nameFound"/>

                    <findLineInside id="68" dst="fn"
                        x="0.000" y="0.127" w="1.000" h="0.123"
                    />

                    <label id="70" src="nameFound"/>
                    <rejectIfNotValid id="71" src="fn"/>
                    <assignField id="78" src="fn" field="FirstName"/>
                    <assignField id="79" src="fn" field="FullName"/>

                    <findLineContent id="80" dst="nat" content="NATURALIDADE" threshold="0.3"/>
                    <assignIfValid id="81" dst="PoB" src="nat" offset="+1"/>
                    <assignField id="89" src="PoB" field="PlaceOfBirth"/>

                    <matchIfValid id="90" src="cpfLine" dst="PIS"
                        regex="([0-9oOl]{11})"
                        value="([N]$1)"
                    />
                    <jumpIfValid id="91" src="PIS" dst="pisFound"/>

                    <findLineMatch id="92" src="pisLine" dst="PIS"
                        regex="([0-9oOl]{11})"
                        value="([N]$1)"
                    />
                    <label id="98" src="pisFound"/>
                    <assignField id="99" src="PIS" field="PIS"/>

                    <assignIfValid id="100" dst="motherName" src="nat" offset="-1"/>
                    <matchIfValid id="101" src="motherName" dst="motherName"
                        regex="^(?:[EÉÈÊË]) (.*)"
                        value="([U]$1)"
                    />

                    <findLineMatch id="110" src="filiacaoLine" dst="filiacao"
                        regex="^([FP][lI]?L[lI]?[A4]..[oO0]|[FP][lI]?[uU][A4]..[oO0])$"
                        value="($1)"
                    />
                    <assignIfValid id="111" dst="fatherName" src="filiacao" offset="+1"/>
                    <jumpIfValid id="119" src="fatherName" dst="fatherNameFound"/>

                    <findLineMatch id="120" src="filiacaoLine" dst="fatherName"
                        regex="(?:[FP][lI]?L[lI]?[A4]..[oO0]|[FP][lI]?[uU][A4]..[oO0]) (.*)"
                        value="([U]$1)"
                    />
                    <jumpIfValid id="129" src="fatherName" dst="fatherNameFound"/>

                    <label id="130" src="fatherNameFound"/>

                    <assignField id="138" src="fatherName" field="FatherName"/>
                    <assignField id="139" src="motherName" field="MotherName"/>

                </ML>
            </Back>

        </Version>        
    </DocumentID>

    <DocumentID id="PY" iso="PRY">
        <Version id="v1" type="TD1">
            <Front>
                <FACE/>
                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="10_0" src="docNumberV1" dst="docNumberV1" overwrite="false"
                        regex="^([0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl])$"
                        value="([N]$1)"
                    />
                    <!-- There are document numbers with only 6 digits -->
                    <findLineMatch id="10_1" src="docNumberV1" dst="docNumberV1" overwrite="false" mode="reverse"
                        regex="^([0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl])$"
                        value="([N]$1)"
                    />
                    <!-- There are document numbers with only 5 digits -->
                    <findLineMatch id="10_2" src="docNumberV1" dst="docNumberV1" overwrite="false" mode="reverse"
                        regex="^([0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl])$"
                        value="([N]$1)"
                    />

                    <findLineMatch id="11_0" src="docNumberV2" dst="docNumberV2" overwrite="false"
                        regex="^([0-9oOl]+)[,\.\:]([0-9oOl]{3})[,\.\:]([0-9oOl]{3})$"
                        value="([N]$1)([N]$2)([N]$3)"
                    />
                    <!-- There are document numbers with only 6 digits -->
                    <findLineMatch id="11_1" src="docNumberV2" dst="docNumberV2" overwrite="false"
                        regex="^([0-9oOl]{3})[,\.\:]([0-9oOl]{3})$"
                        value="([N]$1)([N]$2)"
                    />                    
                    <!-- There are document numbers with only 5 digits -->
                    <findLineMatch id="11_2" src="docNumberV2" dst="docNumberV2" overwrite="false"
                        regex="^([0-9oOl]{2})[,\.\:]([0-9oOl]{3})$"
                        value="([N]$1)([N]$2)"
                    />                    
                    <rejectIfNotValid2 id="18" src="docNumberV1" src2="docNumberV2"/>

                    <!-- IMPORTANT: We reject the oldest version --> 
                    <rejectIfValid id="18_0" src="docNumberV2"/>


                    <jumpIfNotValid id="18_1" src="docNumberV1" dst="go_version2"/>
                    
                    <!-- Version 1 -->
                        <replaceIfValid id="19_0" dst="docNumberV1" content=" " replace=""/>
                        <assignField id="19" src="docNumberV1" field="DocumentNumber"/>

                        <findLineContent id="20" dst="dataRepublicaParaguay" content="REPUBLICA@DEL@PARAGUAY" threshold="0.3"/>
                        <findLineContent id="21" dst="dataCedulaDe" content="Cédula@de@Identidad@Civil" threshold="0.3"/>
                        <findLineContent id="22" dst="dataSurnameAndName" content="APELLIDOS@@NOMBRES" threshold="0.3"/>
                        <findLineContent id="23" dst="dataDateOfBirth" content="FECHA@DE@NACIMIENTO" threshold="0.3"/>
                        <findLineContent id="24" dst="dataPlaceOfBirth" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
                        <findLineContent id="25" dst="dataDateOfExpiry" content="FECHA@DE@VENCIMIENTO" threshold="0.3"/>
                        <findLineContent id="26" dst="dataSex" content="SEXO" threshold="0.3"/>
                        <rejectIfNotValid id="28" src="dataRepublicaParaguay"/>

                        <assignIfValid id="30_1" dst="fn" src="dataSurnameAndName" offset="+2" overwrite="false"/>
                        <assignIfValid id="30_2" dst="fn" src="dataDateOfBirth" offset="-1" overwrite="false"/>
                        <rejectIfNotValid id="37" src="fn"/>
                        <modifyIfValid id="38" dst="fn" op="U"/>
                        <assignField id="39" src="fn" field="FirstName"/>

                        <assignIfValid id="40_1" dst="ln" src="dataSurnameAndName" offset="+1" overwrite="false"/>
                        <assignIfValid id="40_2" dst="ln" src="dataDateOfBirth" offset="-2" overwrite="false"/>
                        <rejectIfNotValid id="47" src="ln"/>
                        <modifyIfValid id="48" dst="ln" op="U"/>
                        <assignField id="49" src="ln" field="LastName"/>

                        <findLineMatch id="50" src="lineDob" dst="dob"
                            regex="([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([1-2l][0-9oOl]{3})"
                            value="([N]$1)/([N]$2)/([N]$3)"
                        />
                        <rejectIfNotValid id="58" src="dob"/>
                        <assignField id="59" src="dob" field="DateOfBirth"/>

                        <assignIfValid id="60_1" dst="pob" src="dataPlaceOfBirth" offset="+1"/>
                        <assignIfValid id="60_2" dst="pob" src="dataDateOfExpiry" offset="-1"/>
                        <rejectIfNotValid id="67" src="pob"/>
                        <assignField id="69" src="pob" field="PlaceOfBirth"/>

                        <assignIfValid id="80" dst="sexRaw" src="dataSex" offset="+1"/>
                        <findLineContent id="80_1" dst="sexRaw" content="Masculino" threshold="2" overwrite="false"/>
                        <findLineContent id="80_2" dst="sexRaw" content="Femenino" threshold="2" overwrite="false"/>
                        <assignIfContent id="81_1" src="sexRaw" dst="sex" value="M"
                            op="distance" param="Masculino" param_2="0.3"
                            overwrite="false"
                        />
                        <assignIfContent id="81_2" src="sexRaw" dst="sex" value="F"
                            op="distance" param="Femenino" param_2="0.3"
                            overwrite="false"
                        />
                        <assignField id="89" src="sex" field="Gender"/>

                        <findLineMatch id="90" src="lineDoe" dst="doe"
                            regex="([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([1-2l][0-9oOl]{3})"
                            value="([N]$1)/([N]$2)/([N]$3)"
                        />
                        <rejectIfNotValid id="98" src="doe"/>
                        <assignField id="99" src="doe" field="DateOfExpiry"/>
                        
                        <jump id="100" dst="end_document"/>

                    <label id="101" src="go_version2"/>
                    <!-- Version 2 -->
                        <assignField id="109" src="docNumberV2" field="DocumentNumber"/>

                        <findLineContent id="120" dst="dataRepublicaParaguay" content="REPUBLICA@DEL@PARAGUAY" threshold="0.3"/>
                        <findLineContent id="121" dst="dataCedulaDe" content="Cédula@de@Identidad@Civil" threshold="0.3"/>
                        <findLineContent id="122" dst="dataSurnameAndName" content="APELLIDOS@@NOMBRES@@@SURNAMES@@GIVEN@NAMES" threshold="0.3"/>
                        <findLineContent id="123" dst="dataDateOfBirth" content="FECHA@DE@NACIMIENTO@@@BIRTH@DATE" threshold="0.3"/>
                        <findLineContent id="124" dst="dataPlaceOfBirth" content="LUGAR@DE@NACIMIENTO@@@PLACE@OF@BIRTH" threshold="0.3"/>
                        <findLineContent id="125" dst="dataDateOfExpiry" content="FECHA@DE@VENCIMIENTO@@@EXPIRY@DATE" threshold="0.3"/>
                        <findLineContent id="126" dst="dataSex" content="SEXO@@@SEX" threshold="0.3"/>
                        <rejectIfNotValid id="128" src="dataRepublicaParaguay"/>

                        <assignIfValid id="130_1" dst="fn" src="dataSurnameAndName" offset="+2" overwrite="false"/>
                        <assignIfValid id="130_2" dst="fn" src="dataDateOfBirth" offset="-1" overwrite="false"/>
                        <rejectIfNotValid id="137" src="fn"/>
                        <modifyIfValid id="138" dst="fn" op="U"/>
                        <assignField id="139" src="fn" field="FirstName"/>

                        <assignIfValid id="140_1" dst="ln" src="dataSurnameAndName" offset="+1" overwrite="false"/>
                        <assignIfValid id="140_2" dst="ln" src="dataDateOfBirth" offset="-2" overwrite="false"/>
                        <rejectIfNotValid id="147" src="ln"/>
                        <modifyIfValid id="148" dst="ln" op="U"/>
                        <assignField id="149" src="ln" field="LastName"/>

                        <findLineMatch id="150" src="lineDob" dst="dob"
                            regex="([0-9oOl]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3}).?.?.?(?:[a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2l][0-9oOl]{3})"
                            value="([N]$1)/([M]$2)/([N]$3)"
                        />
                        <rejectIfNotValid id="158" src="dob"/>
                        <assignField id="159" src="dob" field="DateOfBirth"/>

                        <assignIfValid id="160_1" dst="pob" src="dataPlaceOfBirth" offset="+1"/>
                        <assignIfValid id="160_2" dst="pob" src="dataDateOfExpiry" offset="-1"/>
                        <rejectIfNotValid id="167" src="pob"/>
                        <assignField id="169" src="pob" field="PlaceOfBirth"/>

                        <assignIfValid id="180" dst="sexRaw" src="dataSex" offset="+1"/>
                        <modifyIfValid id="180_0" dst="sexRaw" op="T,U"/>
                        <findLineMatch id="180_1" dst="sexRaw" regex="^(M)$" value="($1)" overwrite="false"/>
                        <findLineMatch id="180_2" dst="sexRaw" regex="^(F)$" value="($1)" overwrite="false"/>
                        <assignIfContent id="181_1" src="sexRaw" dst="sex" value="M"
                            op="equals" param="M"
                            overwrite="false"
                        />
                        <assignIfContent id="181_2" src="sexRaw" dst="sex" value="F"
                            op="equals" param="F"
                            overwrite="false"
                        />
                        <assignField id="189" src="sex" field="Gender"/>

                        <findLineMatch id="190" src="lineDoe" dst="doe"
                            regex="([0-9oOl]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3}).?.?.?(?:[a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2l][0-9oOl]{3})"
                            value="([N]$1)/([M]$2)/([N]$3)"
                        />
                        <rejectIfNotValid id="198" src="doe"/>
                        <assignField id="199" src="doe" field="DateOfExpiry"/>

                    <label id="300" src="end_document"/>

                </ML>
            </Front>

            <Back>
                <MRZ allow_special_chars="true">
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocumentNumber"  line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>                
                <!-- <PDF417/> -->
            </Back>

            
        </Version>
    </DocumentID>

    <DocumentID id="MX" iso="MEX">
        <Version id="v1" type="TD1">
            <Front>
                <FACE/>
                <ML cols="10" split_by="elements" separation="0.08" space_separation="0.05">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="0" dst="ine" content="INSTITUTO@NACIONAL@ELECTORAL" threshold="4"/>
                    <findLineContent id="1" dst="ife" content="INSTITUTO@FEDERAL@ELECTORAL" threshold="4"/>
                    <findLineContent id="2" dst="rfe" content="REGISTRO@FEDERAL@DE@ELECTORES" threshold="0.3"/>
                    <findLineContent id="3" dst="cpv" content="CREDENCIAL@PARA@VOTAR" threshold="0.3"/>

                    <rejectIfNotValid2 id="4" src="cpv" src2="ine"/>
                    <rejectIfNotValid2 id="5" src="cpv" src2="rfe"/>
                    <!-- In this case we reject this scan if it's NOT present -->
                    <rejectIfNotValid id="6" src="rfe"/>


                    <findLineContent id="10" dst="nom" content="NOMBRE" threshold="2"/>
                    <findLineMatch id="11" dst="nom"
                        regex="^([NnMm][Oo0D][MnNn][B8D3][RnrB][EB])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineContent id="15" dst="domi" content="DOMICILIO" threshold="3"/>
                    <findLineMatch id="16" dst="domi"
                        regex="^([DOo0][Oo0D][MnNn][Il1]?[CcOo0][Il1]?[LUu][Il1]?[Oo0D])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="19" src="domi"/>

                    <assignIfValid id="20" dst="fn" src="domi" offset="-1" overwrite="false"/>
                    <assignIfValid id="21" dst="ln1" src="domi" offset="-2" overwrite="false"/>
                    <assignIfValid id="22" dst="ln2" src="domi" offset="-3" overwrite="false"/>

                    <jumpIfNotValid id="23" src="ln2" dst="no_swap"/>
                        <assignIfValid id="24" dst="temp" src="ln2"/>
                        <assignIfValid id="25" dst="ln2" src="ln1"/>
                        <assignIfValid id="26" dst="ln1" src="temp"/>
                    <label id="29" src="no_swap"/>

                    <modifyIfValid id="30" dst="fn" op="U"/>
                    <modifyIfValid id="31" dst="ln1" op="U"/>
                    <modifyIfValid id="32" dst="ln2" op="U"/>

                    <!-- Remove doubles -->
                    <matchIfValid id="33_1" dst="fn" regex="(.*A)A$" value="($1)"/>
                    <matchIfValid id="33_2" dst="fn" regex="(.*E)E$" value="($1)"/>
                    <matchIfValid id="33_3" dst="fn" regex="(.*I)I$" value="($1)"/>
                    <matchIfValid id="33_4" dst="fn" regex="(.*O)O$" value="($1)"/>
                    <matchIfValid id="33_5" dst="fn" regex="(.*U)U$" value="($1)"/>
                    <matchIfValid id="34_1" dst="ln1" regex="(.*A)A$" value="($1)"/>
                    <matchIfValid id="34_2" dst="ln1" regex="(.*E)E$" value="($1)"/>
                    <matchIfValid id="34_3" dst="ln1" regex="(.*I)I$" value="($1)"/>
                    <matchIfValid id="34_4" dst="ln1" regex="(.*O)O$" value="($1)"/>
                    <matchIfValid id="34_5" dst="ln1" regex="(.*U)U$" value="($1)"/>
                    <matchIfValid id="35_1" dst="ln2" regex="(.*A)A$" value="($1)"/>
                    <matchIfValid id="35_2" dst="ln2" regex="(.*E)E$" value="($1)"/>
                    <matchIfValid id="35_3" dst="ln2" regex="(.*I)I$" value="($1)"/>
                    <matchIfValid id="35_4" dst="ln2" regex="(.*O)O$" value="($1)"/>
                    <matchIfValid id="35_5" dst="ln2" regex="(.*U)U$" value="($1)"/>

                    <assignIfValid id="38" dst="ln" src="ln1"/>
                    <concatenateIfValid id="39" dst="ln" src="ln2" prefix=" " sufix=""/>

                    <assignField id="40" src="fn" field="FirstName" block="true"/>
                    <assignField id="41" src="ln1" field="LastName1" block="true"/>
                    <assignField id="42" src="ln2" field="LastName2" block="true"/>
                    <assignField id="43" src="ln" field="LastName"/>

                    <findLineMatch id="50" src="lineElectorKey" dst="elecKey"
                        regex="([A-Za-z]{6})([0-9oOlBASsG]{8})([A-Za-z]{1})([0-9oOlBASsG]{3})"
                        value="([U]$1)([N]$2)([U]$3)([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch id="51" src="lineElectorKey" dst="elecKey"
                        regex="(?:[cCOoD][LUu][A4][VvYy][EB8].*|.*[EB8][LUu][EB8][cC][TIl1][oO0][RnBH]) ([A-Z0-9]+)"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="52" src="elecKey"/>
                    <assignField id="59" src="elecKey" field="ElectorKey"/>

                    <findLineMatch id="60_1" src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3})(O)(\d)"
                        value="($1)0($3)"
                        overwrite="false"
                    />
                    <findLineMatch id="60_2" src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3})(4)(\d)"
                        value="($1)A($3)"
                        overwrite="false"
                    />
                    <findLineMatch id="60" src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d]\d)"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch id="61" src="lineCURP" dst="curp"
                        regex="([A-Za-z]{4})([0-9A-Za-z]{6})([A-Za-z]{6})([A-Za-z0-9])([0-9A-Za-z])"
                        value="([U]$1)([N]$2)([U]$3)([N]$4)([N]$5)"
                        overwrite="false"
                    />

                    <findLineMatch id="62" src="lineCURP" dst="curp"
                        regex="(?:[cCO0o][uU][RnBH][PRp]) ?([A-Z0-9]{18})"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch id="63" dst="CURPstr"
                        regex="^([cCO0o][uU][RnBH][PRp])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid id="64" dst="lineCURP" src="CURPstr" offset="1" overwrite="false"/>
                    <matchIfValid id="65" src="lineCURP" dst="curp"
                        regex="([A-Z0-9]{18})"
                        value="($1)"
                        overwrite="false"
                    />
                    <!-- We check for the last time if the CURP is well-formed -->
                    <matchIfValid id="66" src="curp" dst="validCurp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d]\d)"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="67" src="validCurp"/>
                    <assignField id="68" src="validCurp" field="CURP"/>
                    <!-- We use CURP as DocumentNumber -->
                    <assignField id="69" src="validCurp" field="DocumentNumber"/>

                    <findLineMatch id="70" src="lineFolio" dst="folio"
                        regex="(?:[FP][Oo0D]L?[LUu][Il1]?[Oo0D]) ?([A-Z0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="71" dst="lineFolio" content="FOLIO#" threshold="0.2" overwrite="false"/>
                    <matchIfValid id="72" src="lineFolio" dst="folio"
                        regex="([A-Z0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField id="79" src="folio" field="Folio"/>

                    <assignIfValid id="80" dst="address1" src="lineFolio" offset="-3" overwrite="false"/>
                    <assignIfValid id="81" dst="address2" src="lineFolio" offset="-2" overwrite="false"/>
                    <assignIfValid id="82" dst="address3" src="lineFolio" offset="-1" overwrite="false"/>

                    <assignIfValid id="90" dst="address1" src="lineElectorKey" offset="-3" overwrite="false"/>
                    <assignIfValid id="91" dst="address2" src="lineElectorKey" offset="-2" overwrite="false"/>
                    <assignIfValid id="92" dst="address3" src="lineElectorKey" offset="-1" overwrite="false"/>

                    <assignIfValid id="100" dst="address" src="address1" overwrite="false"/>
                    <concatenateIfValid id="101" dst="address" src="address2" prefix=" - " sufix=""/>
                    <concatenateIfValid id="102" dst="address" src="address3" prefix=" - " sufix=""/>

                    <assignIfContent id="105" dst="address1" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignField id="106" src="address1" field="Address1" block="true"/>
                    <assignField id="107" src="address2" field="Address2" block="true"/>
                    <assignField id="108" src="address3" field="Address3" block="true"/>
                    <assignField id="109" src="address" field="Address"/>

                    <findLineContent id="110" dst="es_mun_loc" content="ESTADO @@ MUNICIPIO @@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid3 id="111" src="es_mun_loc" dst="estado" dst2="municipio" dst3="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="112" dst="loc_emi_vig" content="LOCALIDAD @@@@ EMISIÓN @@@@ VIGENCIA @@@@" threshold="0.2"/>
                    <matchIfValid3 id="113" src="loc_emi_vig" dst="local" dst2="emision" dst3="vigencia"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineContent id="114" dst="es_mun" content="ESTADO @@ MUNICIPIO @@@" threshold="0.2"/>
                    <matchIfValid2 id="115" src="es_mun" dst="estado" dst2="municipio"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="116" dst="mun_sec" content="MUNICIPIO @@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid2 id="117" src="mun_sec" dst="municipio" dst2="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="118" dst="es" content="ESTADO @@" threshold="0.2"/>
                    <matchIfValid id="121_2" src="es" dst="estado"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="119" dst="loc_sec" content="LOCALIDAD @@@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid2 id="120" src="loc_sec" dst="local" dst2="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="121" dst="emi_vig" content="EMISIÓN @@@@ VIGENCIA HASTA @@@@" threshold="0.3"/>
                    <matchIfValid2 id="122" src="emi_vig" dst="emision" dst2="vigencia"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineMatch id="123" src="line_dob_sec_vig" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/)*([0-9oOl]{2})(?: |-|\.|\/)*([1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid id="124" src="line_dob_sec_vig" dst="seccion"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?([0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="125" src="line_dob_sec_vig" dst="emision"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?([1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="126" src="line_dob_sec_vig" dst="vigencia"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <concatenateIfValid id="140" dst="DoI" src="emision" prefix="01/01/" sufix=""/>
                    <concatenateIfValid id="141" dst="DoE" src="vigencia" prefix="31/12/" sufix=""/>

                    <assignField id="150" src="estado" field="Estado" block="true"/>
                    <assignField id="151" src="municipio" field="Municipio" block="true"/>
                    <assignField id="152" src="local" field="Localidad" block="true"/>
                    <assignField id="153" src="seccion" field="Seccion" block="true"/>
                    <assignField id="154" src="DoI" field="DateOfIssue" block="true"/>
                    <assignField id="155" src="DoE" field="DateOfExpiry" block="true"/>
                    <assignField id="156" src="DoB" field="DateOfBirth" block="true"/>

                    <findLineContent id="160" dst="edad" content="EDAD @@" threshold="2"/>
                    <matchIfValid id="161" src="edad" dst="age"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField id="169" src="age" field="Age"/>

                    <findLineContent id="170" dst="sex" content="SEXO @" threshold="2"/>
                    <matchIfValid id="171" src="sex" dst="gender"
                        regex="(H|M)"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField id="179" src="gender" field="Gender"/>

                    <!-- We try again with the date of birth -->
                    <findLineMatch id="180" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/)*([0-9oOl]{2})(?: |-|\.|\/)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid id="181" src="curp" dst="DoB"
                        regex="^(?:[A-Za-z0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})(?:[A-Za-z0-9]{8})$"
                        value="([N]$3)/([N]$2)/([YP]$1)"
                        overwrite="false"
                    />                    
                    <assignField id="189" src="DoB" field="DateOfBirth" block="true"/>

                    <!-- We try to find Registration year and emision number -->
                    <matchIfValid id="190" src="lineFolio" dst="regYear"
                        regex="(?:[A-Za-z]+) ?([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="191" src="lineCURP" dst="regYear"
                        regex="(?:[A-Za-z]+) ?([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="192" src="regYearIssueStr" dst="regYear"
                        regex="^([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField id="199" src="regYear" field="RegistrationYear"/>

                    <matchIfValid id="200" src="lineFolio" dst="issueNumber"
                        regex="(?:[A-Za-z]+) ?(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="201" src="lineCURP" dst="issueNumber"
                        regex="(?:[A-Za-z]+) ?(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />    
                    <matchIfValid id="202" src="regYearIssueStr" dst="issueNumber"
                        regex="^(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <assignField id="209" src="issueNumber" field="IssueNumber"/>

                    <!-- We try again with Seccion and Vigencia -->
                    <findLineMatch id="210" src="line_sec_vig" dst="seccion2"
                        regex="^([0-9]{4}) [0-9]{4} ?-? ?[0-9]{4}$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="211" src="line_sec_vig" dst="emision2"
                        regex="^[0-9]{4} ([0-9]{4}) ?-? ?[0-9]{4}$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="212" src="line_sec_vig" dst="vigencia2"
                        regex="^[0-9]{4} [0-9]{4} ?-? ?([0-9]{4})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <concatenateIfValid id="220" dst="DoI2" src="emision2" prefix="01/01/" sufix=""/>
                    <concatenateIfValid id="221" dst="DoE2" src="vigencia2" prefix="31/12/" sufix=""/>
                    <assignIfValid id="222" dst="DoI" src="DoI2" overwrite="false"/>
                    <assignIfValid id="223" dst="DoE" src="DoE2" overwrite="false"/>
                    <rejectIfNotValid id="224" src="DoI"/>
                    <rejectIfNotValid id="225" src="DoE"/>

                    <assignField id="227" src="seccion2" field="Seccion" block="true"/>
                    <assignField id="228" src="DoI2" field="DateOfIssue" block="true"/>
                    <assignField id="229" src="DoE2" field="DateOfExpiry" block="true"/>

                </ML>
            </Front>

            <Back>
                <MRZ optional="yes">
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocNumberMRZ"    line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>
                <BARCODE optional="yes"/>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000" />
                </OCR>
                <ML cols="10" split_by="lines" separation="0.20" space_separation="0.05">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="31" dst="mark" content="ESTE@DOCUMENTO@ES@INTRANSFERIBLE" threshold="0.3"/>
                    <findLineContent id="32" dst="mark2" content="EL@TITULAR@ESTA@OBLIGADO@A@NOTI-" threshold="0.3"/>
                    <findLineContent id="33" dst="inst_nac_elect" content="INSTITUTO@NACIONAL@ELECTORAL" threshold="0.3"/>
                    <findLineContent id="34" dst="efle" content="ELECCIONES@FEDERALES@LOCALES@Y@EXTRAORDINARIAS" threshold="0.3" overwrite="false"/>
                    <findLineContent id="35" dst="efle" content="ELECCIONES@FEDERALES" threshold="0.3" overwrite="false"/>
                    <findLineContent id="36" dst="efle" content="LOCALES@Y@EXTRAORDINARIAS" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid4 id="39" src="mark" src2="mark2" src3="inst_nac_elect" src4="efle"/>

                </ML>
                <ML-90 cols="10" split_by="lines" separation="0.20" space_separation="0.05">
                    <findLineMatch id="0" dst="OCRNumber"
                        regex="([0-9A-Za-z]{13})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="1" dst="OCRNumber"
                        regex="((?:[0-9A-Za-z] ?){13})"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineMatch id="2" dst="OCRNumber"
                        regex="^([0-9A-Za-z]{10,})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="3" dst="OCRNumber"
                        regex="^((?:[0-9A-Za-z] ?){10,})=?$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <replaceIfValid id="7" dst="OCRNumber" content=" " replace=""/>
                    <rejectIfNotValid id="8" src="OCRNumber"/>
                    <assignField id="9" src="OCRNumber" field="OCRNumber"/>
                </ML-90>
            </Back>
    
        </Version>

        <Version id="v2" type="TD1">
            <Front>
                <FACE/>
                <ML cols="10" split_by="elements" separation="0.08" space_separation="0.05">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="0" dst="ine" content="INSTITUTO@NACIONAL@ELECTORAL" threshold="4"/>
                    <findLineContent id="1" dst="ife" content="INSTITUTO@FEDERAL@ELECTORAL" threshold="4"/>
                    <findLineContent id="2" dst="rfe" content="REGISTRO@FEDERAL@DE@ELECTORES" threshold="0.3"/>
                    <findLineContent id="3" dst="cpv" content="CREDENCIAL@PARA@VOTAR" threshold="0.3"/>

                    <rejectIfNotValid2 id="4" src="cpv" src2="ine"/>
                    <rejectIfNotValid2 id="5" src="cpv" src2="rfe"/>
                    <!-- In this case we reject this scan if IT'S present -->
                    <rejectIfValid id="6" src="rfe"/>


                    <findLineContent id="10" dst="nom" content="NOMBRE" threshold="2"/>
                    <findLineMatch id="11" dst="nom"
                        regex="^([NnMm][Oo0D][MnNn][B8D3][RnrB][EB])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineContent id="15" dst="domi" content="DOMICILIO" threshold="3"/>
                    <findLineMatch id="16" dst="domi"
                        regex="^([DOo0][Oo0D][MnNn][Il1]?[CcOo0][Il1]?[LUu][Il1]?[Oo0D])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="19" src="domi"/>

                    <assignIfValid id="20" dst="fn" src="domi" offset="-1" overwrite="false"/>
                    <assignIfValid id="21" dst="ln1" src="domi" offset="-2" overwrite="false"/>
                    <assignIfValid id="22" dst="ln2" src="domi" offset="-3" overwrite="false"/>

                    <jumpIfNotValid id="23" src="ln2" dst="no_swap"/>
                        <assignIfValid id="24" dst="temp" src="ln2"/>
                        <assignIfValid id="25" dst="ln2" src="ln1"/>
                        <assignIfValid id="26" dst="ln1" src="temp"/>
                    <label id="29" src="no_swap"/>

                    <modifyIfValid id="30" dst="fn" op="U"/>
                    <modifyIfValid id="31" dst="ln1" op="U"/>
                    <modifyIfValid id="32" dst="ln2" op="U"/>
                    <assignIfValid id="38" dst="ln" src="ln1"/>
                    <concatenateIfValid id="39" dst="ln" src="ln2" prefix=" " sufix=""/>

                    <assignField id="40" src="fn" field="FirstName" block="true"/>
                    <assignField id="41" src="ln1" field="LastName1" block="true"/>
                    <assignField id="42" src="ln2" field="LastName2" block="true"/>
                    <assignField id="43" src="ln" field="LastName"/>

                    <findLineMatch id="50" src="lineElectorKey" dst="elecKey"
                        regex="([A-Za-z]{6})([0-9oOlBASsG]{8})([A-Za-z]{1})([0-9oOlBASsG]{3})"
                        value="([U]$1)([N]$2)([U]$3)([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch id="51" src="lineElectorKey" dst="elecKey"
                        regex="(?:[cCOoD][LUu][A4][VvYy][EB8].*|.*[EB8][LUu][EB8][cC][TIl1][oO0][RnBH]) ([A-Z0-9]+)"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="52" src="elecKey"/>
                    <assignField id="59" src="elecKey" field="ElectorKey"/>

                    <findLineMatch id="60_1" src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3})(O)(\d)"
                        value="($1)0($3)"
                        overwrite="false"
                    />
                    <findLineMatch id="60_2" src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3})(4)(\d)"
                        value="($1)A($3)"
                        overwrite="false"
                    />
                    <findLineMatch id="60" src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d]\d)"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch id="61" src="lineCURP" dst="curp"
                        regex="([A-Za-z]{4})([0-9A-Za-z]{6})([A-Za-z]{6})([A-Za-z0-9])([0-9A-Za-z])"
                        value="([U]$1)([N]$2)([U]$3)([N]$4)([N]$5)"
                        overwrite="false"
                    />

                    <findLineMatch id="62" src="lineCURP" dst="curp"
                        regex="(?:[cCO0o][uU][RnBH][PRp]) ?([A-Z0-9]{18})"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch id="63" dst="CURPstr"
                        regex="^([cCO0o][uU][RnBH][PRp])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid id="64" dst="lineCURP" src="CURPstr" offset="1" overwrite="false"/>
                    <matchIfValid id="65" src="lineCURP" dst="curp"
                        regex="([A-Z0-9]{18})"
                        value="($1)"
                        overwrite="false"
                    />
                    <!-- We check for the last time if the CURP is well-formed -->
                    <matchIfValid id="66" src="curp" dst="validCurp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d]\d)"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="67" src="validCurp"/>
                    <assignField id="68" src="validCurp" field="CURP"/>
                    <!-- We use CURP as DocumentNumber -->
                    <assignField id="69" src="validCurp" field="DocumentNumber"/>

                    <findLineMatch id="70" src="lineFolio" dst="folio"
                        regex="(?:[FP][Oo0D]L?[LUu][Il1]?[Oo0D]) ?([A-Z0-9]+)"
                        value="([N]$1)"
                    />
                    <assignField id="79" src="folio" field="Folio"/>

                    <assignIfValid id="80" dst="address1" src="lineFolio" offset="-3" overwrite="false"/>
                    <assignIfValid id="81" dst="address2" src="lineFolio" offset="-2" overwrite="false"/>
                    <assignIfValid id="82" dst="address3" src="lineFolio" offset="-1" overwrite="false"/>

                    <assignIfValid id="90" dst="address1" src="lineElectorKey" offset="-3" overwrite="false"/>
                    <assignIfValid id="91" dst="address2" src="lineElectorKey" offset="-2" overwrite="false"/>
                    <assignIfValid id="92" dst="address3" src="lineElectorKey" offset="-1" overwrite="false"/>

                    <assignIfValid id="100" dst="address" src="address1" overwrite="false"/>
                    <concatenateIfValid id="101" dst="address" src="address2" prefix=" - " sufix=""/>
                    <concatenateIfValid id="102" dst="address" src="address3" prefix=" - " sufix=""/>

                    <assignIfContent id="105" dst="address1" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignField id="106" src="address1" field="Address1" block="true"/>
                    <assignField id="107" src="address2" field="Address2" block="true"/>
                    <assignField id="108" src="address3" field="Address3" block="true"/>
                    <assignField id="109" src="address" field="Address"/>

                    <findLineContent id="110" dst="es_mun_loc" content="ESTADO @@ MUNICIPIO @@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid3 id="111" src="es_mun_loc" dst="estado" dst2="municipio" dst3="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="112" dst="loc_emi_vig" content="LOCALIDAD @@@@ EMISIÓN @@@@ VIGENCIA @@@@" threshold="0.2"/>
                    <matchIfValid3 id="113" src="loc_emi_vig" dst="local" dst2="emision" dst3="vigencia"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineContent id="114" dst="es_mun" content="ESTADO @@ MUNICIPIO @@@" threshold="0.2"/>
                    <matchIfValid2 id="115" src="es_mun" dst="estado" dst2="municipio"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="116" dst="mun_sec" content="MUNICIPIO @@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid2 id="117" src="mun_sec" dst="municipio" dst2="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="118" dst="es" content="ESTADO @@" threshold="0.2"/>
                    <matchIfValid id="121_2" src="es" dst="estado"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="119" dst="loc_sec" content="LOCALIDAD @@@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid2 id="120" src="loc_sec" dst="local" dst2="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent id="121" dst="emi_vig" content="EMISIÓN @@@@ VIGENCIA HASTA @@@@" threshold="0.3"/>
                    <matchIfValid2 id="122" src="emi_vig" dst="emision" dst2="vigencia"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineMatch id="123" src="line_dob_sec_vig" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/)*([0-9oOl]{2})(?: |-|\.|\/)*([1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid id="124" src="line_dob_sec_vig" dst="seccion"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?([0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="125" src="line_dob_sec_vig" dst="emision"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?([1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="126" src="line_dob_sec_vig" dst="vigencia"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <concatenateIfValid id="140" dst="DoI" src="emision" prefix="01/01/" sufix=""/>
                    <concatenateIfValid id="141" dst="DoE" src="vigencia" prefix="31/12/" sufix=""/>

                    <assignField id="150" src="estado" field="Estado" block="true"/>
                    <assignField id="151" src="municipio" field="Municipio" block="true"/>
                    <assignField id="152" src="local" field="Localidad" block="true"/>
                    <assignField id="153" src="seccion" field="Seccion" block="true"/>
                    <assignField id="154" src="DoI" field="DateOfIssue" block="true"/>
                    <assignField id="155" src="DoE" field="DateOfExpiry" block="true"/>
                    <assignField id="156" src="DoB" field="DateOfBirth" block="true"/>

                    <findLineContent id="160" dst="edad" content="EDAD @@" threshold="2"/>
                    <matchIfValid id="161" src="edad" dst="age"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField id="169" src="age" field="Age"/>

                    <findLineContent id="170" dst="sex" content="SEXO @" threshold="2"/>
                    <matchIfValid id="171" src="sex" dst="gender"
                        regex="(H|M)"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField id="179" src="gender" field="Gender"/>

                    <!-- We try again with the date of birth -->
                    <findLineMatch id="180" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/)*([0-9oOl]{2})(?: |-|\.|\/)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid id="181" src="curp" dst="DoB"
                        regex="^(?:[A-Za-z0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})(?:[A-Za-z0-9]{8})$"
                        value="([N]$3)/([N]$2)/([YP]$1)"
                        overwrite="false"
                    />                    
                    <assignField id="189" src="DoB" field="DateOfBirth" block="true"/>

                    <!-- We try to find Registration year and emision number -->
                    <matchIfValid id="190" src="lineFolio" dst="regYear"
                        regex="(?:[A-Za-z]+) ?([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="191" src="lineCURP" dst="regYear"
                        regex="(?:[A-Za-z]+) ?([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="192" src="regYearIssueStr" dst="regYear"
                        regex="^([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField id="199" src="regYear" field="RegistrationYear"/>

                    <matchIfValid id="200" src="lineFolio" dst="issueNumber"
                        regex="(?:[A-Za-z]+) ?(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="201" src="lineCURP" dst="issueNumber"
                        regex="(?:[A-Za-z]+) ?(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />    
                    <matchIfValid id="202" src="regYearIssueStr" dst="issueNumber"
                        regex="^(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <assignField id="209" src="issueNumber" field="IssueNumber"/>

                    <!-- We try again with Seccion and Vigencia -->
                    <findLineMatch id="210" src="line_sec_vig" dst="seccion2"
                        regex="^([0-9]{4}) [0-9]{4} ?-? ?[0-9]{4}$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="211" src="line_sec_vig" dst="emision2"
                        regex="^[0-9]{4} ([0-9]{4}) ?-? ?[0-9]{4}$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid id="212" src="line_sec_vig" dst="vigencia2"
                        regex="^[0-9]{4} [0-9]{4} ?-? ?([0-9]{4})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <concatenateIfValid id="220" dst="DoI2" src="emision2" prefix="01/01/" sufix=""/>
                    <concatenateIfValid id="221" dst="DoE2" src="vigencia2" prefix="31/12/" sufix=""/>
                    <assignIfValid id="222" dst="DoI" src="DoI2" overwrite="false"/>
                    <assignIfValid id="223" dst="DoE" src="DoE2" overwrite="false"/>
                    <rejectIfNotValid id="224" src="DoI"/>
                    <rejectIfNotValid id="225" src="DoE"/>

                    <assignField id="227" src="seccion2" field="Seccion" block="true"/>
                    <assignField id="228" src="DoI2" field="DateOfIssue" block="true"/>
                    <assignField id="229" src="DoE2" field="DateOfExpiry" block="true"/>

                </ML>
            </Front>

            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocNumberMRZ"    line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>
                <BARCODE optional="yes"/>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000" />
                </OCR>
                <ML cols="10" split_by="lines" separation="0.20" space_separation="0.05">

                    <findLineMatch id="0" dst="lineMRZ"
                        regex="(I ?. ?M ?E ?X.*\&lt;\s?\&lt;?.*)"
                        value="($1)"
                    />

                    <findLineContent id="11" dst="ine" content="INE" threshold="0.1"/>
                    <findLineContent id="12" dst="efle" content="ELECCIONES@FEDERALES@LOCALES@Y@EXTRAORDINARIAS" threshold="0.3" overwrite="false"/>
                    <findLineContent id="13" dst="efle" content="ELECCIONES@FEDERALES" threshold="0.3" overwrite="false"/>
                    <findLineContent id="14" dst="efle" content="LOCALES@Y@EXTRAORDINARIAS" threshold="0.3" overwrite="false"/>
                    <findLineContent id="15" dst="inst_nac_elect" content="INSTITUTO@NACIONAL@ELECTORAL" threshold="0.3"/>
                    <rejectIfNotValid3 id="19" src="ine" src2="efle" src3="inst_nac_elect"/>

                    <rejectIfNotValid2 id="41" src="lineMRZ" src2="mark"/>

                </ML>
            </Back>

        </Version>        
    </DocumentID>
     
    <DocumentID id="CR" iso="CRI">
        <Version id="All" type="TD1">
            <Front>
                <FACE/>
                <ML cols="6" split_by="lines" separation="0.05" space_separation="0.05">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="0" dst="rdc" content="REPÚBLICA@DE@COSTA@RICA" threshold="0.3"/>
                    <findLineContent id="1" dst="tse" content="Tribunal@Supremo@de@Elecciones" threshold="0.3"/>
                    <findLineContent id="2" dst="cdi" content="Cédula@de@Identidad" threshold="0.3"/>

                    <rejectIfNotValid3 id="9" src="rdc" src2="tse" src3="cdi"/>

                    <findLineMatch id="10" src="dataDocNumber" dst="docNumber"
                        regex="([0-9]+) ?([0-9]{4}) ?([0-9]{4})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <rejectIfNotValid id="18" src="docNumber"/>
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>

                    <findLineMatch id="20" src="dataCC" dst="cc"
                        regex="^(?:[cC][\. ]?[cC]\:?)(.*)"
                        value="([U]$1)"
                    />
                    <jumpIfValid id="21" src="cc" dst="ccFound"/>
                    <findLineContent id="22" dst="cc" content="C.C:" threshold="2"/>
                    <replaceIfValid id="23" dst="cc" content="C.C:" replace="" threshold="2"/>
                    <label id="27" src="ccFound"/>
                    <rejectIfNotValid id="28" src="cc"/>
                    <assignField id="29" src="cc" field="CC"/>

                    <assignIfValid id="30" dst="ln2" src="dataCC" offset="-1"/>
                    <assignIfValid id="31" dst="ln1" src="dataCC" offset="-2"/>
                    <assignIfValid id="32" dst="fn"  src="dataCC" offset="-3"/>

                    <replaceIfValid id="40" dst="ln2" content="2" replace=""/>
                    <replaceIfValid id="41" dst="ln2" content="°" replace=""/>
                    <replaceIfValid id="42" dst="ln2" content=":" replace=""/>
                    <replaceIfValid id="43" dst="ln2" content="&quot;" replace=""/>
                    <replaceIfValid id="47" dst="ln2" content="Apellido" replace="" threshold="3"/>
                    <modifyIfValid id="48" dst="ln2" op="T,U"/>
                    <assignField id="49" src="ln2" field="LastName2"/>

                    <replaceIfValid id="50" dst="ln1" content="1" replace=""/>
                    <replaceIfValid id="51" dst="ln1" content="°" replace=""/>
                    <replaceIfValid id="52" dst="ln1" content=":" replace=""/>
                    <replaceIfValid id="53" dst="ln1" content="&quot;" replace=""/>
                    <replaceIfValid id="57" dst="ln1" content="Apellido" replace="" threshold="3"/>
                    <modifyIfValid id="58" dst="ln1" op="T,U"/>
                    <assignField id="59" src="ln1" field="LastName1"/>

                    <findLineMatch id="60" src="fn" dst="name"
                        regex="(?:[nN][oO0][mM][b6]re:? ?)([A-Z0-9 ]+)"
                        value="([U]$1)"
                    />
                    <modifyIfValid id="67" dst="name" op="T,U"/>
                    <assignField id="68" src="name" field="FirstName"/>
                    <jumpIfValid id="69" src="name" dst="nameFound"/>

                    <replaceIfValid id="70" dst="fn" content=":" replace=""/>
                    <replaceIfValid id="77" dst="fn" content="Nombre" replace="" threshold="3"/>
                    <modifyIfValid id="78" dst="fn" op="T,U"/>
                    <assignField id="79" src="fn" field="FirstName"/>

                    <label id="80_0" src="nameFound"/>
                    <assignIfValid id="80" dst="ln" src="ln1"/>
                    <concatenateIfValid id="81" dst="ln" src="ln2" prefix=" " sufix=""/>
                    <assignField id="89" src="ln" field="LastName"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000" />
                </OCR>
                <!-- <PDF417/> --> <!-- PDF417 Contains binary information. Unable to decode -->

                <ML cols="2" split_by="lines" separation="0.05" space_separation="0.05">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="10" src="dataDocNumber" dst="docNumber"
                        regex="([0-9]+) ?([0-9]{4}) ?([0-9]{4})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <rejectIfNotValid id="18" src="docNumber"/>
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>

                    <findLineMatch id="20" src="dataDoB" dst="DoB"
                        regex="([0-9]{2}) ?([0-9]{2}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField id="29" src="DoB" field="DateOfBirth"/>

                    <findLineMatch id="30" src="dataDoE" dst="DoE"
                        regex="([0-9]{2}) ?([0-9]{2}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField id="39" src="DoE" field="DateOfExpiry"/>

                    <assignIfValid id="40" dst="PoB" src="dataDoB" offset="+1"/>
                    <assignIfValid id="41" dst="fatherName" src="dataDoB" offset="+2"/>
                    <assignIfValid id="42" dst="motherName" src="dataDoB" offset="+3"/>
                    <assignIfValid id="43" dst="domElectoral" src="dataDoB" offset="+4"/>

                    <replaceIfValid id="50" dst="PoB" content="Lugar" replace="" threshold="0.5"/>
                    <replaceIfValid id="51" dst="PoB" content="de" replace="" threshold="0.5"/>
                    <replaceIfValid id="52" dst="PoB" content="Nacimiento" replace="" threshold="0.5"/>
                    <replaceIfValid id="57" dst="PoB" content=":" replace=""/>
                    <modifyIfValid id="58" dst="PoB" op="T"/>
                    <assignField id="59" src="PoB" field="PlaceOfBirth" block="true"/>

                    <replaceIfValid id="60" dst="fatherName" content="Nombre" replace="" threshold="0.5"/>
                    <replaceIfValid id="61" dst="fatherName" content="del" replace="" threshold="0.5"/>
                    <replaceIfValid id="62" dst="fatherName" content="Padre" replace="" threshold="0.5"/>
                    <replaceIfValid id="67" dst="fatherName" content=":" replace=""/>
                    <modifyIfValid id="68" dst="fatherName" op="T,U"/>
                    <assignField id="69" src="fatherName" field="FatherName" block="true"/>

                    <replaceIfValid id="70" dst="motherName" content="Nombre" replace="" threshold="0.5"/>
                    <replaceIfValid id="71" dst="motherName" content="de" replace="" threshold="0.5"/>
                    <replaceIfValid id="72" dst="motherName" content="la" replace="" threshold="0.5"/>
                    <replaceIfValid id="73" dst="motherName" content="Madre" replace="" threshold="0.5"/>
                    <replaceIfValid id="77" dst="motherName" content=":" replace=""/>
                    <modifyIfValid id="78" dst="motherName" op="T,U"/>
                    <assignField id="79" src="motherName" field="MotherName" block="true"/>

                    <replaceIfValid id="80" dst="domElectoral" content="Domicilio" replace="" threshold="0.5"/>
                    <replaceIfValid id="81" dst="domElectoral" content="Electoral" replace="" threshold="0.5"/>
                    <replaceIfValid id="87" dst="domElectoral" content=":" replace=""/>
                    <modifyIfValid id="88" dst="domElectoral" op="T"/>
                    <assignField id="89" src="domElectoral" field="ElectoralAddress" block="true"/>

                    <findLineContent id="100" dst="sexStr" content="Sexo: @" threshold="2"/>
                    <assignIfContent2 id="101" src="sexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 id="102" src="sexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    <assignField id="109" src="sex" field="Gender"/>

                </ML>
            </Back>

            
        </Version>
    </DocumentID>

    <DocumentID id="GT" iso="GTM">
        <Version id="All" type="TD1" priority="PDF417,BARCODE,ML,MRZ,OCR,INPUT">
            <Front>
                <FACE/>
                <ML cols="4" split_by="elements" separation="0.035" space_separation="0.10">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <!-- We try to find if ID is a driver's license to reject it -->
                    <findLineContent id="00" dst="ddt" content="DEPARTAMENTO@DE@TRÁNSITO" threshold="5"/>
                    <rejectIfValid id="01" src="ddt"/>

                    <findLineContent id="02" dst="exdo" content="EXTRANJERO@DOMICILIADO" threshold="5"/>
                    <jumpIfValid id="03" src="exdo" dst="Extranjeria"/>
                        <assignResult id="04" src="$_IDCard" field="DocumentModel"/>
                        <jump id="06" dst="IDCard"/>
                    <label id="07" src="Extranjeria"/>
                        <assignResult id="08" src="$_Extranjeria" field="DocumentModel"/>
                    <label id="09" src="IDCard"/>

                    <findLineMatch id="1" dst="cui" src="cuiStr"
                        regex="([0-9oOl]{4}) ?([0-9oOl]{5}) ?([0-9oOl]{4})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <matchIfValid id="2" dst="docNumber" src="cuiStr"
                        regex="([0-9oOl]{4}) ?([0-9oOl]{5}) ?([0-9oOl]{4})"
                        value="([N]$1)([N]$2)"
                    />
                    <rejectIfNotValid id="5" src="docNumber"/>
                    <assignField id="8" src="docNumber" field="DocumentNumber"/>
                    <assignField id="9" src="cui" field="CUI"/>

                    <findLineContent id="10" dst="rdg" content="REPÚBLICA@DE@GUATEMALA@@CENTROAMÉRICA" threshold="0.3"/>
                    <findLineContent id="11" dst="rnp_dpi_dpi" content="Registro@Nacional@de@las@Personas@@@Documento@Personal@de@Identificación@@@DPI" threshold="0.3"/>
                    <findLineContent id="12" dst="rnp_dpi" content="Registro@Nacional@de@las@Personas" threshold="0.3"/>
                    <findLineContent id="13" dst="dpi" content="Documento@Personal@de@Identificación" threshold="0.3"/>
                    <findLineContent id="14" dst="cui" content="CÓDIGO@ÚNICO@DE@IDENTIFICACIÓN" threshold="0.3"/>

                    <rejectIfNotValid3 id="19" src="rnp_dpi_dpi" src2="rnp_dpi" src3="dpi"/>

                    <findLineContent id="20" dst="nom" content="NOMBRE" threshold="0.33"/>
                    <findLineContent id="21" dst="ape" content="APELLIDO" threshold="0.33"/>

                    <rejectIfNotValid id="22" src="nom"/>
                    <rejectIfNotValid id="23" src="ape"/>

                    <!-- We block the line "SEXO" early to prevent reading "SEXO" as the second last name -->
                    <findLineContent id="24" dst="sexo" content="SEXO" threshold="1"/>
                    <findLineContent id="25" dst="sexMstr" content="MASCULINO" threshold="0.33"/>
                    <findLineContent id="26" dst="sexFstr" content="FEMENINO" threshold="0.33"/>

                    <!-- We block the line "NACIONALIDAD" to prevent reading it as second last name -->
                    <findLineContent id="27" dst="nacionalidad" content="NACIONALIDAD" threshold="4"/>
                    <rejectIfNotValid id="27_1" src="nacionalidad"/> <!-- We reject to prevent capturing the LastName wrong -->
                    <assignIfValid id="28" dst="nat" src="nacionalidad" offset="+1" overwrite="false"/>
                    <assignField id="29" src="nat" field="Nationality" block="true"/>

                    <assignIfValid id="30" dst="fn1" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid id="31" dst="fn2" src="nom" offset="+2" overwrite="false"/>
                    <modifyIfValid id="32" dst="fn1" op="U"/>
                    <modifyIfValid id="33" dst="fn2" op="U"/>
                    <assignIfValid id="34" dst="fn" src="fn1"/>
                    <concatenateIfValid id="35" dst="fn" src="fn2" prefix=" " sufix=""/>
                    <assignField id="37" src="fn1" field="FirstName1" block="true"/>
                    <assignField id="38" src="fn2" field="FirstName2" block="true"/>
                    <assignField id="39" src="fn" field="FirstName" block="true"/>

                    <assignIfValid id="40_1" dst="ln1" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid id="40_2" dst="ln2" src="ape" offset="+2" overwrite="false"/>
                    <assignIfValid id="40_3" dst="ln3" src="ape" offset="+3" overwrite="false"/>
                    <modifyIfValid id="41_1" dst="ln1" op="U"/>
                    <modifyIfValid id="41_2" dst="ln2" op="U"/>
                    <modifyIfValid id="41_3" dst="ln3" op="U"/>
                    <assignIfValid id="42" dst="ln" src="ln1"/>
                    <concatenateIfValid id="43" dst="ln" src="ln2" prefix=" " sufix=""/>
                    <concatenateIfValid id="44" dst="ln" src="ln3" prefix=" " sufix=""/>
                    <assignField id="49_1" src="ln1" field="LastName1" block="true"/>
                    <assignField id="49_2" src="ln2" field="LastName2" block="true"/>
                    <assignField id="49_3" src="ln3" field="LastName3" block="true"/>
                    <assignField id="49_9" src="ln" field="LastName" block="true"/>

                    <assignIfContent id="50" src="sexMstr" dst="sex" value="M"
                        op="exists"
                        overwrite="false"
                    />
                    <assignIfContent id="60" src="sexFstr" dst="sex" value="F"
                        op="exists"
                        overwrite="false"
                    />
                    <assignIfValid id="71" dst="sex" src="sexo" offset="+1" overwrite="false"/>
                    <assignField id="79" src="sex" field="Gender" block="true"/>

                    <findLineMatch id="90" dst="dob" overwrite="false"
                        regex="([0-3oOl][0-9oOl]) ?([a-zA-Z0-9oOl]{3}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <assignField id="99" src="dob" field="DateOfBirth"/>

                    <findLineMatch id="100" dst="doi" overwrite="false"
                        regex="([0-3oOl][0-9oOl]) ?([a-zA-Z0-9oOl]{3}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <assignField id="109" src="doi" field="DateOfIssue"/>

                    <findLineContent id="110" dst="no_sign" content="NO@FIRMA" threshold="2"/>
                    <assignIfContent id="111" src="no_sign" dst="signed" value="NO"
                        op="exists"
                        overwrite="false"
                    />
                    <assignIfContent id="112" src="no_sign" dst="signed" value="YES"
                        op="not_exists"
                        overwrite="false"
                    />

                    <assignField id="119" src="signed" field="Signed"/>

                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <MRZ optional="yes">
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocumentNumber"  line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>
                <ML cols="5" split_by="lines" separation="0.01" space_separation="0.10">

                    <findLineMatch id="000_0" dst="mrzLine1" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_1" dst="mrzLine2" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_2" dst="mrzLine3" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfNotValid3 id="000_3" src="mrzLine1" src2="mrzLine2" src3="mrzLine3"/>
                    <replaceIfValid id="000_4" dst="mrzLine1" content=" " replace=""/>
                    <replaceIfValid id="000_5" dst="mrzLine2" content=" " replace=""/>
                    <replaceIfValid id="000_6" dst="mrzLine3" content=" " replace=""/>

                    <findLineContent id="0" dst="ldn" content="LUGAR@DE@NACIMIENTO" threshold="0.33"/>
                    <findLineContent id="1" dst="vec" content="VECINDAD" threshold="2"/>
                    <findLineContent id="2" dst="pub" content="PUEBLO" threshold="2"/>
                    <rejectIfNotValid2 id="9" src="ldn" src2="vec"/>

                    <findLineMatch id="10" dst="pobCode"
                        regex="L ?[:\-\.]? ?([0-9A-Z\-\/]+) ?F ?[:\-\.]? ?([0-9]+) ?P ?[:\-\.]? ?([0-9]+)"
                        value="L:($1) F:([N]$2) P:([N]$3)"
                        overwrite="false"
                    />
                    <assignField id="19" src="pobCode" field="PlaceOfBirthCode"/>

                    <assignIfValid id="20" dst="pob1" src="ldn" offset="1" overwrite="false"/>
                    <assignIfValid id="21" dst="pob2" src="ldn" offset="2" overwrite="false"/>
                    <assignIfValid id="22" dst="pob3" src="ldn" offset="3" overwrite="false"/>

                    <assignIfValid id="23" dst="pob1" src="vec" offset="-3" overwrite="false"/>
                    <assignIfValid id="24" dst="pob2" src="vec" offset="-2" overwrite="false"/>
                    <assignIfValid id="25" dst="pob3" src="vec" offset="-1" overwrite="false"/>

                    <assignIfValid id="30" dst="pob" src="pob1" overwrite="false"/>
                    <concatenateIfValid id="31" dst="pob" src="pob2" prefix=" - " sufix=""/>
                    <concatenateIfValid id="32" dst="pob" src="pob3" prefix=" - " sufix=""/>

                    <assignIfContent id="35" dst="pob1" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignIfContent id="36" dst="pob2" value=""
                        op="not_exists"
                        overwrite="false"
                    />

                    <assignField id="40" src="pob1" field="PlaceOfBirth1" block="true"/>
                    <assignField id="41" src="pob2" field="PlaceOfBirth2" block="true"/>
                    <assignField id="42" src="pob3" field="PlaceOfBirth3" block="true"/>
                    <assignField id="43" src="pob" field="PlaceOfBirth"/>

                    <findLineMatch id="50" dst="doe" overwrite="false"
                        regex="^([0-3oOl][0-9oOl]) ?([a-zA-Z0-9oOl]{3}) ?([1-2l][0-9oOl]{3})$"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />

                    <findLineContent id="60" dst="ec" content="ESTADO@CIVIL" threshold="0.33"/>
                    <assignIfValid id="61" dst="maritalStatusStr" src="ec" offset="1" overwrite="false"/>
					<modifyIfValid id="62" dst="maritalStatusStr" op="U"/>

                    <assignFromList id="63" src="maritalStatusStr" dst="maritalStatus"
                        list="SOLTERO,CASADO,VIUDO,DIVORCIADO,SEPARADO"
                        threshold="0.3"
                     />

<!--
                    <assignIfContent id="62_1" src="maritalStatusStr" dst="maritalStatus" value="SOLTERO"
                        op="distance" param="SOLTERO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent id="62_2" src="maritalStatusStr" dst="maritalStatus" value="CASADO"
                        op="distance" param="CASADO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent id="62_3" src="maritalStatusStr" dst="maritalStatus" value="VIUDO"
                        op="distance" param="VIUDO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent id="62_4" src="maritalStatusStr" dst="maritalStatus" value="DIVORCIADO"
                        op="distance" param="DIVORCIADO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent id="62_5" src="maritalStatusStr" dst="maritalStatus" value="SEPARADO"
                        op="distance" param="SEPARADO" param_2="0.3"
                        overwrite="false"
                    />
-->
                    <assignField id="69" src="maritalStatus" field="MaritalStatus"/>

                    <findLineMatch id="70" dst="serial"
                        regex="^([0-9oOlBASsG]{13})$"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <!-- We try to read MRZ -->
                    <matchIfValid id="80" src="mrzLine2" dst="doe"
                        regex="(?:[0-9]{2})(?:[0-1][0-9])(?:[0-3][0-9])[0-9](?:[MF])([0-9]{2})([0-1][0-9])([0-3][0-9])"
                        value="([N]$3)/([N]$2)/([YF]$1)"
                        overwrite="false"
                    />
                    <assignField id="89" src="doe" field="DateOfExpiry"/>

                    <matchIfValid id="90" src="mrzLine2" dst="dob"
                        regex="([0-9]{2})([0-1][0-9])([0-3][0-9])[0-9](?:[MF])(?:[0-9]{2})(?:[0-1][0-9])(?:[0-3][0-9])"
                        value="([N]$3)/([N]$2)/([YP]$1)"
                        overwrite="false"
                    />
                    <assignField id="99" src="dob" field="DateOfBirth"/>

                    <matchIfValid id="100" src="mrzLine2" dst="gender"
                        regex="(?:[0-9]{2})(?:[0-1][0-9])(?:[0-3][0-9])[0-9]([MF])(?:[0-9]{2})(?:[0-1][0-9])(?:[0-3][0-9])"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField id="109" src="gender" field="Gender"/>

                    <!-- We test again for Serial number -->
                    <findLineMatch id="110" dst="serial"
                        regex="^([0-9oOlBASsG]{13})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField id="119" src="serial" field="SerialNumber"/>

                </ML>
            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="CL" iso="CHL">
        <Version id="All" type="TD1">
            <Front>
                <FACE/>
                <ML cols="4" split_by="lines" separation="0.01" space_separation="0.10">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="0" src="docNumberStr" dst="docNumber"
                        regex="[R8] ?[uU] ?[nN] ?([0-9]+)[ \-\.]?([0-9]{3})[ \-\.]?([0-9]{3})[-\.]([0-9A-Z])"
                        value="([N]$1).([N]$2).([N]$3)-($4)"
                    />
                    <rejectIfNotValid id="5" src="docNumber"/>
                    <assignField id="9" src="docNumber" field="DocumentNumber"/>

                    <findLineContent id="10" dst="rdc" content="REPÚBLICA@DE@CHILE" threshold="0.3"/>
                    <findLineContent id="11" dst="srcei" content="SERVICIO@DE@REGISTRO@CIVIL@E@IDENTIFICACIÓN" threshold="0.3"/>

                    <findLineContent id="20" dst="nom" content="NOMBRES" threshold="0.33"/>
                    <findLineContent id="21" dst="ape" content="APELLIDOS" threshold="0.33"/>

                    <rejectIfNotValid2 id="29" src="nom" src2="ape"/>

                    <findLineContent id="30" dst="nac" content="NACIONALIDAD" threshold="0.33"/>
                    <findLineContent id="31" dst="sexo" content="SEXO" threshold="1"/>

                    <findLineContent id="40" dst="fdn" content="FECHA@DE@NACIMIENTO" threshold="0.33"/>
                    <findLineContent id="41" dst="nd" content="NUMERO@DOCUMENTO" threshold="0.33"/>

                    <findLineContent id="50" dst="fde" content="FECHA@DE@EMISION" threshold="0.33"/>
                    <findLineContent id="51" dst="fdv" content="FECHA@DE@VENCIMIENTO" threshold="0.33"/>

                    <findLineMatch id="60" src="dobStr" dst="dob"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField id="69" src="dob" field="DateOfBirth"/>

                    <findLineMatch id="70" dst="idcard"
                        regex="([0-9]{3})[ \-\.]([0-9]{3})[ \-\.]([0-9]{3})$"
                        value="([N]$1).([N]$2).([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid id="71" dst="idcard" src="dobStr"
                        regex="([0-9]{3})[ \-\.]([0-9]{3})[ \-\.]([0-9]{3})$"
                        value="([N]$1).([N]$2).([N]$3)"
                        overwrite="false"
                    />
                    <assignField id="79" src="idcard" field="IDCardNumber"/>

                    <findLineMatch2 id="80" src="doiStr" dst="doi" dst2="doe"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField id="89" src="doi" field="DateOfIssue"/>

                    <findLineMatch id="90" dst="doe"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid id="91" dst="doe" src="docNumberStr"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField id="99" src="doe" field="DateOfExpiry"/>

                    <assignIfValid id="100" dst="ln1" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid id="101" dst="ln2" src="ape" offset="+2" overwrite="false"/>
                    <assignIfValid id="102" dst="ln1" src="nom" offset="-2" overwrite="false"/>
                    <assignIfValid id="103" dst="ln2" src="nom" offset="-1" overwrite="false"/>
                    <modifyIfValid id="104" dst="ln1" op="U"/>
                    <modifyIfValid id="105" dst="ln2" op="U"/>

                    <assignIfValid id="106" dst="ln" src="ln1"/>
                    <concatenateIfValid id="107" dst="ln" src="ln2" prefix=" " sufix=""/>

                    <assignIfValid id="110" dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid id="111" dst="fn" src="ape" offset="+4" overwrite="false"/>
                    <modifyIfValid id="112" dst="fn" op="U"/>

                    <rejectIfNotValid id="120" src="ln"/>
                    <rejectIfNotValid id="121" src="fn"/>

                    <assignField id="130" src="ln1" field="LastName1"/>
                    <assignField id="131" src="ln2" field="LastName2"/>
                    <assignField id="132" src="ln" field="LastName"/>
                    <assignField id="133" src="fn" field="FirstName"/>

                </ML>
            </Front>

            <Back>
                <MRZ>
                    <field id="DocumentCode"                                   line="1" starts="1" count="2" />
                    <field id="Issuer"                                         line="1" starts="3" count="3" />
                    <field id="DocumentCode==ID?DocumentNumber:IDCardNumber"   line="1" starts="6" count="9" />
                    <field id="Opt1"                                           line="1" starts="16" count="15" />
                    <field id="DateOfBirth"                                    line="2" starts="1" count="6" />
                    <field id="Gender"                                         line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"                                   line="2" starts="9" count="6" />
                    <field id="Nationality"                                    line="2" starts="16" count="3" />
                    <field id="DocumentCode==ID?Opt2:DocumentNumber"           line="2" starts="19" count="11" />
                    <field id="LastName"                                       line="3" starts="1" count="??" />
                    <field id="FirstName"                                      line="3" starts="??" count="30" />

                    <field id="NfcKey"                                         line="1" starts="6" count="9" />
                </MRZ>

                <ML cols="1" split_by="lines" separation="0.3" space_separation="0.10">

                    <findLineMatch id="000_0" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_1" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch id="000_2" dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>

                    <findLineContent id="10" dst="nacioStr" content="Nació@en#" threshold="3"/>
                    <replaceIfValid id="11" dst="nacio" src="nacioStr" content="Nació@en" replace="" threshold="3"/>
                    <replaceIfValid id="12" dst="nacio" content=":" replace=""/>
                    <assignField id="19" src="nacio" field="PlaceOfBirth"/>

                    <findLineContent id="20" dst="visaStr" content="Visa#" threshold="1"/>
                    <replaceIfValid id="21" dst="visa" src="visaStr" content="Visa" replace="" threshold="1"/>
                    <replaceIfValid id="22" dst="visa" content=":" replace=""/>
                    <assignField id="29" src="visa" field="Visa"/>

                    <findLineContent id="30" dst="profStr" content="Profesión#" threshold="3"/>
                    <replaceIfValid id="31" dst="prof" src="profStr" content="Profesión" replace="" threshold="3"/>
                    <replaceIfValid id="32" dst="prof" content=":" replace=""/>
                    <assignField id="39" src="prof" field="Profession"/>

                </ML>

            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="UY" iso="URY">
        <Version id="v1" type="TD1">
            <Front>
                <FACE/>

                <ML cols="16" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="0" dst="rodu" content="REPUBLICA@ORIENTAL@DEL@URUGUAY" threshold="0.3"/>
                    <findLineContent id="1" dst="ro" content="REPUBLICA@ORIENTAL" threshold="0.3"/>
                    <findLineContent id="2" dst="du" content="DEL@URUGUAY" threshold="0.3"/>
                    <findLineContent id="3" dst="dn" content="DIRECCION@NACIONAL" threshold="0.3"/>
                    <findLineContent id="4" dst="dic" content="DE@IDENTIFICACION@CIVIL" threshold="0.3"/>
                    <findLineContent id="5" dst="cdi" content="Cédula@de@Identidad" threshold="0.3"/>
                    <findLineContent id="6" dst="fir" content="Firma" threshold="1"/>
                    <rejectIfNotValid2 id="9" src="dn" src2="dic"/>

                    <findLineMatch id="10" src="docStr" dst="docNumber"
                    	regex="([0-9]+)[\.:, ]?([0-9]{3})[\.:, ]?([0-9]{3})[\.\-:, ]?([0-9])$"
                    	value="([N]$1)([N]$2)([N]$3)([N]$4)"
                    	overwrite="false"
                    />
                    <rejectIfNotValid id="18" src="docNumber"/>                    
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>
                    <assignField id="19_1" src="docNumber" field="NfcKey"/>

                    <findLineMatch id="20" src="fnStr" dst="fn"
                    	regex="[NH][oO0]i?[mMn]i?[bh][rt][e] ?(.+)$"
                    	value="($1)"
                    	overwrite="false"
                    />
                    <assignIfValid id="21" dst="fn2" src="fn" offset="+1"/>
                    <concatenateIfValid id="22" dst="fn" src="fn2" prefix=" " sufix=""/>
                    <modifyIfValid id="23" dst="fn" op="U"/>

                    <assignField id="28" src="fn" field="FirstName"/>
                    <assignField id="29" src="fn" field="FullName"/>

                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <BARCODE types="CODE39" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="DocumentNumber"       data="0"/>
                    
                    <field id="NfcKey"               data="0"/>
                </BARCODE>

                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <postProcessImage dst=""
                        rMin="0.000" rMax="0.000"
                        gMin="0.250" gMax="0.900"
                        bMin="0.000" bMax="0.000"
                        rWeight="0.000"
                        gWeight="1.000"
                        bWeight="0.000"
                    />

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineMatch id="0" dst="DoB"
                        regex="([0-3oOl]?[0-9oOl])[ ,:;\-\.]?([0-1oOl]?[0-9oOl])[ ,:;\-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="8" src="DoB"/>
                    <assignField id="9" src="DoB" field="DateOfBirth"/>

                    <findLineMatch id="10" dst="DoI"
                        regex="([0-3oOl]?[0-9oOl])[ ,:;\-\.]?([0-1oOl]?[0-9oOl])[ ,:;\-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="18" src="DoI"/>
                    <assignField id="19" src="DoI" field="DateOfIssue"/>

                    <findLineMatch id="20" dst="DoE"
                        regex="([0-3oOl]?[0-9oOl])[ ,:;\-\.]?([0-1oOl]?[0-9oOl])[ ,:;\-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid id="28" src="DoE"/>
                    <assignField id="29" src="DoE" field="DateOfExpiry"/>

                    <findLineMatch id="30" src="fsiStr" dst="fsi"
                        regex="^[A-Za-z\.\-\,]* ?([0-9OolzZBHSsGq]{6})$"
                        value="([N]$1)"
                    />
                    <matchIfValid id="31" src="fsiStr" dst="serie"
                        regex="^([A-Za-z\.\-\,]+) ?[0-9OolzZBHSsGq]{6}$"
                        value="($1)"
                    />
                    <rejectIfNotValid id="33" src="fsi"/>
					<assignField id="38" src="fsi" field="FSI"/>
                    <assignField id="39" src="serie" field="Serie"/>

                </ML>
            </Back>
        </Version>
        
        <Version id="v2" type="TD1">
            <Front>
                <FACE/>

                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="0" dst="rodu" content="REPÚBLICA@ORIENTAL@DEL@URUGUAY" threshold="0.3"/>
                    <findLineContent id="1" dst="roduddi" content="REPÚBLICA@ORIENTAL@DEL@URUGUAY@Documento@de@Identidad" threshold="0.3"/>
                    <findLineContent id="2" dst="dndic" content="DIRECCION@NACIONAL@DE@IDENTIFICACION@CIVIL" threshold="0.3"/>
                    <findLineContent id="3" dst="dndiccdi" content="DIRECCION@NACIONAL@DE@IDENTIFICACION@CIVIL@Carteira@de@Identidade" threshold="0.3"/>
                    <rejectIfNotValid2 id="8" src="rodu" src2="roduddi"/>
                    <rejectIfNotValid2 id="9" src="dndic" src2="dndiccdi"/>

                    <findLineMatch id="10" src="docStr" dst="docNumber"
                    	regex="([0-9]+)[\.:, ]?([0-9]{3})[\.:, ]?([0-9]{3})[\.\-:, ]?([0-9])$"
                    	value="([N]$1)([N]$2)([N]$3)([N]$4)"
                    	overwrite="false"
                    />
                    <rejectIfNotValid id="18" src="docNumber"/>                    
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent id="20" dst="ape" content="Apellido@@@Sobrenome" threshold="0.3"/>
                    <findLineContent id="21" dst="nom" content="Nombre@@@Nome" threshold="0.3"/>
                    <findLineContent id="22" dst="nac" content="Nacionalidad@@@Nacionalidade" threshold="0.3"/>

                    <assignIfValid id="30" dst="ln" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid id="31" dst="ln" src="nom" offset="-1" overwrite="false"/>

                    <assignIfValid id="32" dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid id="33" dst="fn" src="nac" offset="-1" overwrite="false"/>
                                      
                    <assignIfValid id="34" dst="nat" src="nac" offset="+1" overwrite="false"/>

                    <modifyIfValid id="40" dst="fn" op="U"/>
                    <assignField id="49" src="fn" field="FirstName"/>

                    <modifyIfValid id="50" dst="ln" op="U"/>
                    <assignField id="59" src="ln" field="LastName"/>

                    <modifyIfValid id="60" dst="nat" op="U"/>
                    <assignField id="69" src="nat" field="Nationality"/>

                    <findLineMatch id="70" dst="DoB"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField id="79" src="DoB" field="DateOfBirth"/>

                    <findLineMatch id="80" dst="DoI"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField id="89" src="DoI" field="DateOfIssue"/>

                    <findLineMatch id="90" dst="DoE"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField id="99" src="DoE" field="DateOfExpiry"/>

                </ML>

            </Front>
            
            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocumentData"    line="1" starts="6" count="9" />
                    <field id="DocumentNumber"  line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <!-- <field id="Gender"          line="2" starts="8" count="1" /> -->
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>

                <!-- types: DATAMATRIX,QRCODE,EAN8,EAN13,CODE39,CODE128 -->
                <BARCODE types="CODE39" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="DocumentData"       data="0"/>

                    <field id="NfcKey"             data="0"/>
                </BARCODE>

            </Back>
        </Version>

    </DocumentID>

    <DocumentID id="BO" iso="BOL">
        <Version id="All" type="TD1">
            <Front>
                <FACE/>
                <BARCODE types="CODE39" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="DocumentNumber"       data="0"/>
                </BARCODE>

                <ML cols="3" split_by="lines" separation="0.10" space_separation="0.15">
                    <!--
                    <postProcessImage dst=""
                        rMin="0.200" rMax="0.250"
                        gMin="0.200" gMax="0.900"
                        bMin="0.200" bMax="0.250"
                        rWeight="0.500"
                        gWeight="1.000"
                        bWeight="0.500"
                    />
                    -->
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="0" dst="epb" content="ESTADO@PLURINACIONAL@DE@BOLIVIA" threshold="0.3"/>
                    <findLineContent id="1" dst="cdi" content="CÉDULA@DE@IDENTIDAD" threshold="0.3"/>
                    <findLineContent id="2" dst="ser" content="serie" threshold="0.3"/>
                    <findLineContent id="3" dst="sec" content="sección" threshold="0.3"/>
                    <rejectIfNotValid2 id="9" src="epb" src2="cdi"/>

                    <findLineMatch id="10" dst="serie"
                        regex="^([0-9oOlBASsG]{5})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="11" dst="seccion"
                        regex="^([0-9oOlBASsG]{5})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignIfValid id="16" dst="serie" src="ser" offset="+1" overwrite="false"/>
                    <assignIfValid id="17" dst="seccion" src="sec" offset="+1" overwrite="false"/>
                    <assignField id="18" src="serie" field="Serie"/>
                    <assignField id="19" src="seccion" field="Section"/>
            
                    

                    <findLineMatch id="20" src="codeStr" dst="codeNumber"
                        regex="([A-Za-z0-9]{8}) ?([0-9oOlBASsG]{7})"
                        value="([U]$1)([N]$2)"
                        overwrite="false"
                    />
                    <findLineMatch id="21" src="codeStr" dst="codeNumber"
                        regex="([A-Za-z0-9]{8}) ?- ?([0-9oOlBASsG]{7})"
                        value="($1)-([N]$2)"
                        overwrite="false"
                    />
                    <assignField id="29" src="codeNumber" field="CodeNumber"/>

                    <findLineMatch id="30" src="doeStr" dst="doi"
                        regex="([0-9oOlBASsG]{1,2}) ?de ?([A-Za-z]{3})[A-Za-z]+ ?de ?([1-2Il][0-9oOIlBASsG]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField id="39" src="doi" field="DateOfExpiry"/>

     		   <findLineMatch id="40" src="doeStr" dst="doe"
                        regex="([Expira]{6})+ ?el ?([0-9]{1,2}) ?de ?([A-Za-z]{3})[A-Za-z]+ ?de ?([1-2Il][0-9oOIlBASsG]{3})"
                        value="([N]$2)/([M]$3)/([N]$4)"
                        overwrite="true"
                    />
                    <assignField id="49" src="doe" field="DateOfExpiry"/>

                    <findLineMatch id="70" src="docStr" dst="docNumber"
                        regex="([0-9oOlBASsG]{6,}) "
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="71" src="docStr" dst="docNumber"
                        regex="([0-9oOlBASsG]{6,})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="78" src="docNumber"/>
                    <assignField id="79" src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent id="80" dst="de" content="de" threshold="0.3"/>
                    <assignIfValid id="81" dst="placeOfExped" src="de" offset="+1" overwrite="false"/>
                   <assignField id="82" src="placeOfExped" field="PlaceOfExpedition"/>
                   
                   <assignIfValid id="83" dst="placeOfExpedSecond" src="seccion" offset="+1" overwrite="false"/>
                   <assignField id="84" src="placeOfExpedSecond" field="PlaceOfExpedition"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <ML cols="2" split_by="lines" separation="0.10" space_separation="0.10">
                    <postProcessImage dst=""
                        rMin="0.200" rMax="0.250"
                        gMin="0.200" gMax="0.900"
                        bMin="0.200" bMax="0.250"
                        rWeight="0.250"
                        gWeight="0.500"
                        bWeight="0.250"
                    />

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="0" dst="sip" content="EL@SERVICIO@GENERAL@DE@IDENTIFICACION@PERSONAL" threshold="0.3"/>
                    <findLineContent id="1" dst="cff" content="CERTIFICA@@Que@la@firma@@fotografia" threshold="0.3"/>
                    <findLineContent id="2" dst="eip" content="e@impresion@pertenece" threshold="5"/>
                    <rejectIfNotValid2 id="3" src="sip" src2="cff"/>

                    <matchIfValid id="5" src="eip" dst="docNumber"
                        regex="((?:[0-9oOlBASsG] ?){6,})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="10" src="docStr" dst="docNumber"
                        regex="((?:[0-9oOlBASsG] ?){6,})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="17" src="docNumber"/>
                    <replaceIfValid id="18" dst="docNumber" content=" " replace=""/>
                    <assignField id="19" src="docNumber" field="DocumentNumber"/>

                    <findLineMatch id="20" dst="DoB" src="DoBStr"
                        regex="([0-9oOlBASsG]{1,2}) ?de ?([A-Za-z]{3})[A-Za-z]+ ?de ?([1-2Il][0-9oOIlBASsG]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="28" src="DoB"/>
                    <assignField id="29" src="DoB" field="DateOfBirth"/>

                    <findLineMatch id="30" src="aStr" dst="fln"
                        regex="A: (.+)"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="31" src="aStr" dst="a"
                        regex="^(A:?)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid id="32" dst="fln" src="a" offset="+1" overwrite="false"/>
                    <assignIfValid id="33" dst="fln" src="a" offset="-1" overwrite="false"/>
                    <assignIfValid id="34" dst="fln" src="DoBStr" offset="-1" overwrite="false"/>
                    <rejectIfNotValid id="37" src="fln"/>
                    <assignField id="38" src="fln" field="FullName"/>
                    <assignField id="39" src="fln" field="FirstName"/>

                    <findLineMatch id="40" src="enStr" dst="pob"
                        regex="^En ?(.+)$"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <findLineMatch id="41" src="enStr" dst="pob"
                        regex="En (.+)$"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <assignField id="49" src="pob" field="PlaceOfBirth"/>

                    <assignIfValid id="50" src="enStr" dst="maritalStatus" offset="+1"/>
                    <replaceIfValid id="51" dst="maritalStatus" content="Estado" replace="" threshold="0.2"/>
                    <replaceIfValid id="52" dst="maritalStatus" content="Civil" replace="" threshold="0.2"/>
                    <assignField id="59" src="maritalStatus" field="MaritalStatus"/>

                    <findLineMatch id="60" src="domi" dst="address"
                        regex="^[DOo][oO0][mMnN][iIl]?[cCd][iIl]?[liI]?[iIl][oO0] ?(.+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch id="61" src="domi" dst="address"
                        regex="[DOo][oO0][mMnN][iIl]?[cCd][iIl]?[liI]?[iIl][oO0] ?(.+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField id="69" src="address" field="Address"/>

                </ML>
            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="DO" iso="DOM">
        <Version id="All" type="TD1">

        <!-- 
            <Front>
            </Front>
        -->

            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2" />
                    <field id="Issuer"          line="1" starts="3" count="3" />
                    <field id="DocumentNumber"  line="1" starts="6" count="9" />
                    <field id="Opt1"            line="1" starts="16" count="15" />
                    <field id="DateOfBirth"     line="2" starts="1" count="6" />
                    <field id="Gender"          line="2" starts="8" count="1" />
                    <field id="DateOfExpiry"    line="2" starts="9" count="6" />
                    <field id="Nationality"     line="2" starts="16" count="3" />
                    <field id="Opt2"            line="2" starts="19" count="11" />
                    <field id="LastName"        line="3" starts="1" count="??" />
                    <field id="FirstName"       line="3" starts="??" count="30" />

                    <field id="NfcKey"          line="1" starts="6" count="9" />
                </MRZ>

                <ML cols="2" split_by="lines" separation="0.10" space_separation="0.10">
                    
                    <findLineContent id="0" dst="dir" content="DIRECCION@DE@RESIDENCIA" threshold="5"/>
                    <findLineContent id="1" dst="sec" content="SECTOR" threshold="2"/>
                    <findLineContent id="2" dst="mun" content="MUNICIPIO" threshold="3"/>

                    <assignIfValid id="10" dst="address" src="dir" offset="1" />
                    <assignIfValid id="11" dst="address2" src="sec" offset="1" />
                    <assignIfValid id="12" dst="address3" src="mun" offset="1" />

                    <jumpIfNotValid id="17" src="address" dst="endCapture"/>
                    <jumpIfNotValid id="18" src="address2" dst="endCapture"/>
                    <jumpIfNotValid id="19" src="address3" dst="endCapture"/>

                    <concatenateIfValid id="20" dst="address" src="address2" prefix="\n" sufix=""/>
                    <concatenateIfValid id="21" dst="address" src="address3" prefix="\n" sufix=""/>
                    <assignField id="29" src="address" field="Address"/>

                    <label id="30" src="endCapture"/>
                    
                </ML>
            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="NG" iso="NGA">
        <Version id="v1" type="TD1">
            <Front>
                <FACE/>
                <ML cols="1" split_by="elements" separation="0.15" space_separation="0.10">
                    
                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>

                    <findLineContent id="10" dst="frn" content="FEDERAL@REPUBLIC@OF@NIGERIA" threshold="0.3"/>
                    <findLineContent id="11" dst="inec" content="INDEPENDENT@NATIONAL@ELECTORAL@COMMISSION" threshold="0.3"/>                    
                    <findLineContent id="12" dst="vcard" content="VOTER@S@CARD" threshold="0.3"/>                    
                    <rejectIfNotValid id="18" src="frn"/>
                    <rejectIfNotValid2 id="19" src="inec" src2="vcard"/>

                    <!-- Find VIN -->
                    <findLineMatch id="20" src="vinStr" dst="vin"
                        regex="([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{3})"
                        value="($1)($2)($3)($4)($5)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="27" src="vin"/>                    
                    <assignField id="28" src="vin" field="VIN"/>
                    <assignField id="29" src="vin" field="DocumentNumber"/>

                    <!-- Find CODE -->
                    <findLineMatch id="30" src="codeStr" dst="code"
                        regex="([0-9]{2})-([0-9]{2})-([0-9]{2})-([0-9]{3})"
                        value="($1)-($2)-($3)-($4)"
                        overwrite="false"
                    />
                    <!-- Find CODE in VIN str -->
                    <matchIfValid id="31" src="vinStr" dst="code"
                        regex="([0-9]{2})-([0-9]{2})-([0-9]{2})-([0-9]{3})"
                        value="($1)-($2)-($3)-($4)"
                        overwrite="false"
                    />
                    <assignField id="29" src="code" field="Code"/>

                    <findLineContent id="30" dst="dobStr" content="DATE@OF@BIRTH" threshold="0.3"/>

                    <!-- Assign the full name right before the DATE OF BIRTH string -->
                    <assignIfValid id="40" dst="fullN" src="DoBStr" offset="-1" overwrite="false"/>
                    <splitIfValid2 id="41" src="fullN" by=","
                        dst1="ln"
                        dst2="fn"
                        overwrite="false"
                    />
                    <jumpIfNotValid id="42" src="fn" dst="no_decomposed_name"/>
                        <assignField id="43" src="fn" field="FirstName"/>
                        <assignField id="44" src="ln" field="LastName"/>
                        <assignIfValid id="45" dst="fullN" src="fn"/>
                        <concatenateIfValid id="46" dst="fullN" src="ln" prefix=" " sufix=""/>
                    <label id="47" src="no_decomposed_name"/>
                    <assignField id="49" src="fullN" field="FullName"/>

                    <findLineMatch id="50" dst="DoB"
                        regex="^([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($1)/($2)/($3)"
                    />
                    <assignField id="59" src="DoB" field="DateOfBirth"/>

                    <findLineContent id="60_1" dst="maleStr" content="MALE" threshold="1" overwrite="false"/>
                    <findLineContent id="60_2" dst="femaleStr" content="FEMALE" threshold="1" overwrite="false"/>
                    <assignIfContent id="60_3" src="maleStr" dst="gender" value="M"
                        op="exists"
                        overwrite="false"
                    />
                    <assignIfContent id="60_4" src="femaleStr" dst="gender" value="F"
                        op="exists"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="68" src="gender"/>
                    <assignField id="69" src="gender" field="Gender"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <PDF417 optional="yes">
                </PDF417>

                <BARCODE optional="yes">
                </BARCODE>

                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch id="0000_0" dst="mrzPresent" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfValid id="0000_1" src="mrzPresent"/>
                    
                    <!-- Find VIN -->
                    <findLineMatch id="10" src="vinStr" dst="vin"
                        regex="([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{3})$"
                        value="($1)($2)($3)($4)($5)"
                        overwrite="false"
                    />
                    <rejectIfNotValid id="17" src="vin"/>                    
                    <assignField id="18" src="vin" field="VIN"/>
                    <assignField id="19" src="vin" field="DocumentNumber"/>

                    <findLineContent id="20" dst="DoIStr" content="DATE@OF@REG @@@ @@,@@@@" threshold="0.3" overwrite="false"/>
                    <matchIfValid id="21" src="DoIStr" dst="DoI"
                        regex="([A-Z]{3}) ?([0-3][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($2)/([M]$1)/($3)"
                        overwrite="false"
                    />
                    <assignField id="29" src="DoI" field="DateOfIssue"/>

                </ML>

            </Back>
        </Version>
    </DocumentID>

    <Supported
        Front="AL,AT,BE,BA,BG,HR,CY,CZ,EE,FI,FR,GE,DE,HU,IT,XK,LV,LT,LU,MT,MD,ME,NL,PL,PT,RS,SK,SI,ES,SE,CH,UA,DZ,BH,CM,EG,GH,IQ,IL,JO,KE,KW,LB,MU,MA,NG,OM,SA,SN,ZA,TR,AE,UG,AR,BS,BO,CL,CO,CR,DO,EC,SV,GT,HT,HN,MX,NI,PY,PE,PR,TT,UY,VE,AM,AZ,BD,BN,CN,IN,KZ,KG,MY,MV,PK,PH,SG,KR,LK,TW,VN,AU,CA,US"
        Back= "AL,AT,BE,BA,BG,HR,CY,CZ,EE,FI,FR,GE,DE,HU,IT,XK,LV,LT,LU,MT,MD,ME,NL,PL,PT,RS,SK,SI,ES,SE,CH,UA,DZ,BH,CM,EG,GH,IQ,IL,JO,KE,KW,LB,MU,MA,NG,OM,SA,SN,ZA,TR,AE,UG,AR,BO,CL,CO,CR,DO,EC,SV,GT,HT,HN,MX,NI,PY,PE,TT,UY,AM,AZ,BD,BN,CN,IN,KZ,KG,MY,MV,PK,SG,LK,VN,CA,US"
    
        Exceptions="AR,KR"
        Exceptions-Front="AR,KR"
        Exceptions-Back="AR,KR,ES"
    />

</selphid-widget-conf>
